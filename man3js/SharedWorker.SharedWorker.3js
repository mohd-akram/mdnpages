.\" Automatically generated by Pandoc 3.2.1
.\"
.TH "SharedWorker.SharedWorker" "JS" "July 26, 2024" "JavaScript" "JavaScript Reference Manual"
.SH NAME
SharedWorker.SharedWorker \- SharedWorker: SharedWorker() constructor
.SH SYNOPSIS
The \f[B]\f[CB]SharedWorker()\f[B]\f[R] constructor creates a
\f[CR]SharedWorker\f[R] object that executes the script at the specified
URL.
This script must obey the same\-origin policy.
.RS
.PP
\f[B]Note:\f[R] There is disagreement among browser manufacturers about
whether a data URL is of the same origin or not.
Although Firefox 10.0 and later accept data URLs, that\[cq]s not the
case in all other browsers.
.RE
.SH SYNTAX
.IP
.EX
new SharedWorker(aURL)
new SharedWorker(aURL, name)
new SharedWorker(aURL, options)
.EE
.SS Parameters
.TP
\f[B]aURL\f[R]
A string representing the URL of the script the worker will execute.
It must obey the same\-origin policy.
.TP
\f[B]name\f[R] \f[I](optional)\f[R]
A string specifying an identifying name for the
\f[CR]SharedWorkerGlobalScope\f[R] representing the scope of the worker,
which is useful for creating new instances of the same SharedWorker and
debugging.
.TP
\f[B]options\f[R] \f[I](optional)\f[R]
An object containing option properties that can set when creating the
object instance.
Available properties are as follows:
.RS
.TP
\f[B]type\f[R]
A string specifying the type of worker to create.
The value can be \f[CR]classic\f[R] or \f[CR]module\f[R].
If not specified, the default used is \f[CR]classic\f[R].
.TP
\f[B]credentials\f[R]
A string specifying the type of credentials to use for the worker.
The value can be \f[CR]omit\f[R], \f[CR]same\-origin\f[R], or
\f[I]\f[CI]include\f[I].
If not specified, or if type is \f[CI]classic\f[I], the default used is
\f[CI]omit\f[I] (no credentials required).\f[R]
.TP
\f[B]name\f[R]
A string specifying an identifying name for the
\f[CR]SharedWorkerGlobalScope\f[R] representing the scope of the worker,
which is mainly useful for debugging purposes.
.TP
\f[B]sameSiteCookies\f[R]
A string indicating which \f[CR]SameSite\f[R] cookies should be
available to the worker.
Can have one of the following two values:
.RS
.TP
`all'
\f[CR]SameSite=Strict\f[R], \f[CR]SameSite=Lax\f[R], and
\f[CR]SameSite=None\f[R] cookies will all be available to the worker.
This option is only supported in first\-party contexts, and is the
default in first\-party contexts.
.TP
`none'
Only \f[CR]SameSite=None\f[R] cookies will be available to the worker.
This option is supported in first\-party and third\-party contexts, and
is the default in third\-party contexts.
.RE
.RE
.SS Exceptions
.TP
\f[B]SecurityError\f[R] \f[B]DOMException\f[R]
Thrown if the document is not allowed to start workers, for example if
the URL has an invalid syntax or if the same\-origin policy is violated,
or if the \f[CR]sameSiteCookies\f[R] value is not supported in the given
context.
.TP
\f[B]NetworkError\f[R] \f[B]DOMException\f[R]
Thrown if the MIME type of the worker script is incorrect.
It should \f[I]always\f[R] be \f[CR]text/javascript\f[R] (for historical
reasons other JavaScript MIME types may be accepted).
.TP
\f[B]SyntaxError\f[R] \f[B]DOMException\f[R]
Thrown if \f[CR]aURL\f[R] cannot be parsed.
.SH EXAMPLES
The following code snippet shows creation of a \f[CR]SharedWorker\f[R]
object using the \f[CR]SharedWorker()\f[R] constructor and subsequent
usage of the object:
.IP
.EX
\f[B]const\f[R] myWorker = \f[B]new\f[R] SharedWorker(\[dq]worker.js\[dq]);

myWorker.port.start();

first.onchange = () \f[B]=>\f[R] {
  myWorker.port.postMessage([first.value, second.value]);
  console.log(\[dq]Message posted to worker\[dq]);
};

second.onchange = () \f[B]=>\f[R] {
  myWorker.port.postMessage([first.value, second.value]);
  console.log(\[dq]Message posted to worker\[dq]);
};

myWorker.port.onmessage = (e) \f[B]=>\f[R] {
  result1.textContent = e.data;
  console.log(\[dq]Message received from worker\[dq]);
};
.EE
.PP
For a full example, see our \c
.UR https://github.com/mdn/dom-examples/tree/main/web-workers/simple-shared-worker
Basic shared worker example
.UE \c
\ (\c
.UR https://mdn.github.io/dom-examples/web-workers/simple-shared-worker/
run shared worker
.UE \c
\&.)
.SH SEE ALSO
.IP \[bu] 2
The \f[CR]SharedWorker\f[R] interface it belongs to.

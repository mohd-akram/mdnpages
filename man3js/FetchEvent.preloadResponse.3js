.\" Automatically generated by Pandoc 3.6.2
.\"
.TH "FetchEvent.preloadResponse" "JS" "July 30, 2024" "JavaScript" "JavaScript Reference Manual"
.SH NAME
FetchEvent.preloadResponse \- FetchEvent: preloadResponse property
.SH SYNOPSIS
\f[B]Note:\f[R] This feature is only available in Service Workers.
.PP
The \f[B]\f[CB]preloadResponse\f[B]\f[R] read\-only property of the
\f[CR]FetchEvent\f[R] interface returns a \f[CR]Promise\f[R] that
resolves to the navigation preload \f[CR]Response\f[R] if navigation
preload was triggered, or \f[CR]undefined\f[R] otherwise.
.PP
Navigation preload is triggered if navigation preload is enabled, the
request is a \f[CR]GET\f[R] request, and the request is a navigation
request (generated by the browser when loading pages and iframes).
.PP
A service worker can wait on this promise in its fetch event handler in
order to track completion of a fetch request made during service\-worker
boot.
.SH VALUE
A \f[CR]Promise\f[R] that resolves to a \f[CR]Response\f[R] or otherwise
to \f[CR]undefined\f[R].
.SH EXAMPLES
This code snippet is from \c
.UR https://web.dev/blog/navigation-preload
Speed up Service Worker with Navigation Preloads
.UE \c
\&.
.PP
The \f[CR]onfetch\f[R] event handler listens for the \f[CR]fetch\f[R]
event.
When fired, the handler calls \f[CR]FetchEvent.respondWith()\f[R] to
pass a promise back to the controlled page.
This promise will resolve with the requested resource.
.PP
If there is a matching URL request in the \f[CR]Cache\f[R] object, then
the code returns a promise for fetching the response from the cache.
If no match is found in the cache, the code returns the promise in
\f[CR]preloadResponse\f[R].
If there is no matching cache or preloaded response, the code fetches
the response from the network and returns the associated promise.
.IP
.EX
addEventListener(\[dq]fetch\[dq], (event) \f[B]=>\f[R] {
  event.respondWith(
    (\f[B]async\f[R] () \f[B]=>\f[R] {
      \f[I]// Respond from the cache if we can\f[R]
      \f[B]const\f[R] cachedResponse = \f[B]await\f[R] caches.match(event.request);
      \f[B]if\f[R] (cachedResponse) \f[B]return\f[R] cachedResponse;

      \f[I]// Else, use the preloaded response, if it\[aq]s there\f[R]
      \f[B]const\f[R] response = \f[B]await\f[R] event.preloadResponse;
      \f[B]if\f[R] (response) \f[B]return\f[R] response;

      \f[I]// Else try the network.\f[R]
      \f[B]return\f[R] fetch(event.request);
    })(),
  );
});
.EE
.SH SEE ALSO
.IP \[bu] 2
\c
.UR https://web.dev/blog/navigation-preload
Speed up Service Worker with Navigation Preloads
.UE \c
.IP \[bu] 2
Using Service Workers
.IP \[bu] 2
\c
.UR https://github.com/mdn/dom-examples/tree/main/service-worker/simple-service-worker
Service workers basic code example
.UE \c
.IP \[bu] 2
Using web workers

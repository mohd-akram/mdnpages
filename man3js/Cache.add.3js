.\" Automatically generated by Pandoc 3.1.12.3
.\"
.TH "Cache.add" "JS" "February 5, 2024" "JavaScript" "JavaScript Reference Manual"
.SH NAME
Cache.add \- Cache: add() method
.SH SYNOPSIS
\f[B]Secure context\f[R]: This feature is available only in secure
contexts (HTTPS).
.PP
The \f[B]\f[CB]add()\f[B]\f[R] method of the \f[CR]Cache\f[R] interface
takes a URL, retrieves it, and adds the resulting response object to the
given cache.
.PP
The \f[CR]add()\f[R] method is functionally equivalent to the following:
.IP
.EX
fetch(url).then((response) \f[B]=>\f[R] {
  \f[B]if\f[R] (!response.ok) {
    \f[B]throw\f[R] \f[B]new\f[R] TypeError(\[dq]bad response status\[dq]);
  }
  \f[B]return\f[R] cache.put(url, response);
});
.EE
.PP
For more complex operations, you\[cq]ll need to use
\f[CR]Cache.put()\f[R] directly.
.RS
.PP
\f[B]Note:\f[R] \f[CR]add()\f[R] will overwrite any key/value pair
previously stored in the cache that matches the request.
.RE
.SH SYNTAX
.IP
.EX
add(request)
.EE
.SS Parameters
.TP
\f[B]request\f[R]
A request for the resource you want to add to the cache.
This can be a \f[CR]Request\f[R] object or a URL.
.RS
.PP
This parameter is used as a parameter to the \f[CR]Request()\f[R]
constructor, so URLs follow the same rules as for that constructor.
In particular, URLs may be relative to the base URL, which is the
document\[cq]s \f[CR]baseURI\f[R] in a window context, or
\f[CR]WorkerGlobalScope.location\f[R] in a worker context.
.RE
.SS Return value
A \f[CR]Promise\f[R] that resolves with \f[CR]undefined\f[R].
.SS Exceptions
.TP
\f[B]TypeError\f[R]
The URL scheme is not \f[CR]http\f[R] or \f[CR]https\f[R].
.RS
.PP
The Response status is not in the 200 range (i.e., not a successful
response.)
This occurs if the request does not return successfully, but also if the
request is a \f[I]cross\-origin no\-cors\f[R] request (in which case the
reported status is always 0.)
.RE
.SH EXAMPLES
This code block waits for an \f[CR]InstallEvent\f[R] to fire, then calls
\f[CR]waitUntil()\f[R] to handle the install process for the app.
This consists of calling \f[CR]CacheStorage.open\f[R] to create a new
cache, then using \f[CR]Cache.add\f[R] to add an asset to it.
.IP
.EX
\f[B]this\f[R].addEventListener(\[dq]install\[dq], (event) \f[B]=>\f[R] {
  event.waitUntil(caches.open(\[dq]v1\[dq]).then((cache) \f[B]=>\f[R] cache.add(\[dq]/index.html\[dq])));
});
.EE
.SH SEE ALSO
.IP \[bu] 2
Using Service Workers
.IP \[bu] 2
\f[CR]Cache\f[R]
.IP \[bu] 2
\f[CR]caches\f[R]

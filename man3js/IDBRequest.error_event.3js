.\" Automatically generated by Pandoc 3.2.1
.\"
.TH "IDBRequest.error_event" "JS" "June 27, 2024" "JavaScript" "JavaScript Reference Manual"
.SH NAME
IDBRequest.error_event \- IDBRequest: error event
.SH SYNOPSIS
The \f[CR]error\f[R] handler is executed when an error caused a request
to fail.
In the \f[CR]error\f[R] event handler, you can access the error of the
request, as well as place more requests to the same transaction.
.PP
This event is not cancelable and does not bubble.
.SH SYNTAX
Use the event name in methods like \f[CR]addEventListener()\f[R], or set
an event handler property.
.IP
.EX
addEventListener(\[dq]error\[dq], (event) \f[B]=>\f[R] {});

onerror = (event) \f[B]=>\f[R] {};
.EE
.SH EVENT TYPE
A generic \f[CR]Event\f[R].
.SH EXAMPLES
This example opens a database and tries to add a record, listening for
the \f[CR]error\f[R] event for the \f[CR]add()\f[R] operation (this will
occur if, for example, a record with the given \f[CR]taskTitle\f[R]
already exists):
.IP
.EX
\f[I]// Open the database\f[R]
\f[B]const\f[R] DBOpenRequest = window.indexedDB.open(\[dq]toDoList\[dq], 4);

DBOpenRequest.addEventListener(\[dq]upgradeneeded\[dq], (event) \f[B]=>\f[R] {
  \f[B]const\f[R] db = event.target.result;

  db.onerror = () \f[B]=>\f[R] {
    console.log(\[dq]Error creating database\[dq]);
  };

  \f[I]// Create an objectStore for this database\f[R]
  \f[B]const\f[R] objectStore = db.createObjectStore(\[dq]toDoList\[dq], {
    keyPath: \[dq]taskTitle\[dq],
  });

  \f[I]// define what data items the objectStore will contain\f[R]
  objectStore.createIndex(\[dq]hours\[dq], \[dq]hours\[dq], { unique: \f[B]false\f[R] });
  objectStore.createIndex(\[dq]minutes\[dq], \[dq]minutes\[dq], { unique: \f[B]false\f[R] });
  objectStore.createIndex(\[dq]day\[dq], \[dq]day\[dq], { unique: \f[B]false\f[R] });
  objectStore.createIndex(\[dq]month\[dq], \[dq]month\[dq], { unique: \f[B]false\f[R] });
  objectStore.createIndex(\[dq]year\[dq], \[dq]year\[dq], { unique: \f[B]false\f[R] });
});

DBOpenRequest.addEventListener(\[dq]success\[dq], (event) \f[B]=>\f[R] {
  \f[B]const\f[R] db = DBOpenRequest.result;

  \f[I]// open a read/write db transaction, ready for adding the data\f[R]
  \f[B]const\f[R] transaction = db.transaction([\[dq]toDoList\[dq]], \[dq]readwrite\[dq]);
  \f[B]const\f[R] objectStore = transaction.objectStore(\[dq]toDoList\[dq]);
  \f[B]const\f[R] newItem = {
    taskTitle: \[dq]my task\[dq],
    hours: 10,
    minutes: 10,
    day: 10,
    month: \[dq]January\[dq],
    year: 2020,
  };

  \f[B]const\f[R] objectStoreRequest = objectStore.add(newItem);
  objectStoreRequest.addEventListener(\[dq]error\[dq], () \f[B]=>\f[R] {
    console.log(\[ga]Error adding new item: ${newItem.taskTitle}\[ga]);
  });
});
.EE
.PP
The same example, using the \f[CR]onerror\f[R] property instead of
\f[CR]addEventListener()\f[R]:
.IP
.EX
\f[I]// Open the database\f[R]
\f[B]const\f[R] DBOpenRequest = window.indexedDB.open(\[dq]toDoList\[dq], 4);

DBOpenRequest.onupgradeneeded = (event) \f[B]=>\f[R] {
  \f[B]const\f[R] db = event.target.result;

  db.onerror = () \f[B]=>\f[R] {
    console.log(\[dq]Error creating database\[dq]);
  };

  \f[I]// Create an objectStore for this database\f[R]
  \f[B]const\f[R] objectStore = db.createObjectStore(\[dq]toDoList\[dq], {
    keyPath: \[dq]taskTitle\[dq],
  });

  \f[I]// define what data items the objectStore will contain\f[R]
  objectStore.createIndex(\[dq]hours\[dq], \[dq]hours\[dq], { unique: \f[B]false\f[R] });
  objectStore.createIndex(\[dq]minutes\[dq], \[dq]minutes\[dq], { unique: \f[B]false\f[R] });
  objectStore.createIndex(\[dq]day\[dq], \[dq]day\[dq], { unique: \f[B]false\f[R] });
  objectStore.createIndex(\[dq]month\[dq], \[dq]month\[dq], { unique: \f[B]false\f[R] });
  objectStore.createIndex(\[dq]year\[dq], \[dq]year\[dq], { unique: \f[B]false\f[R] });
};

DBOpenRequest.onsuccess = (event) \f[B]=>\f[R] {
  \f[B]const\f[R] db = DBOpenRequest.result;

  \f[I]// open a read/write db transaction, ready for adding the data\f[R]
  \f[B]const\f[R] transaction = db.transaction([\[dq]toDoList\[dq]], \[dq]readwrite\[dq]);
  \f[B]const\f[R] objectStore = transaction.objectStore(\[dq]toDoList\[dq]);
  \f[B]const\f[R] newItem = {
    taskTitle: \[dq]my task\[dq],
    hours: 10,
    minutes: 10,
    day: 10,
    month: \[dq]January\[dq],
    year: 2020,
  };

  \f[B]const\f[R] objectStoreRequest = objectStore.add(newItem);
  objectStoreRequest.onerror = () \f[B]=>\f[R] {
    console.log(\[ga]Error adding new item: ${newItem.taskTitle}\[ga]);
  };
};
.EE
.SH SEE ALSO
.IP \[bu] 2
Using IndexedDB

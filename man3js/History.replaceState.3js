.\" Automatically generated by Pandoc 3.1.12.3
.\"
.TH "History.replaceState" "JS" "January 15, 2024" "JavaScript" "JavaScript Reference Manual"
.SH NAME
History.replaceState \- History: replaceState() method
.SH SYNOPSIS
The \f[B]\f[CB]replaceState()\f[B]\f[R] method of the \f[CR]History\f[R]
interface modifies the current history entry, replacing it with the
state object and URL passed in the method parameters.
This method is particularly useful when you want to update the state
object or URL of the current history entry in response to some user
action.
.SH SYNTAX
.IP
.EX
replaceState(state, unused)
replaceState(state, unused, url)
.EE
.SS Parameters
.TP
\f[B]state\f[R]
An object which is associated with the history entry passed to the
\f[CR]replaceState()\f[R] method.
The state object can be \f[CR]null\f[R].
.TP
\f[B]unused\f[R]
This parameter exists for historical reasons, and cannot be omitted;
passing the empty string is traditional, and safe against future changes
to the method.
.TP
\f[B]url\f[R] \f[I](optional)\f[R]
The URL of the history entry.
The new URL must be of the same origin as the current URL; otherwise the
\f[CR]replaceState()\f[R] method throws an exception.
.SS Return value
None (\f[CR]undefined\f[R]).
.SS Exceptions
.TP
\f[B]SecurityError\f[R] \f[B]DOMException\f[R]
Thrown if the associated document is not fully active, or if the
provided \f[CR]url\f[R] parameter is not a valid URL.
.TP
\f[B]DataCloneError\f[R] \f[B]DOMException\f[R]
Thrown if the provided \f[CR]state\f[R] parameter is not serializable.
.SH EXAMPLES
Suppose \f[CR]https://www.mozilla.org/foo.html\f[R] executes the
following JavaScript:
.IP
.EX
\f[B]const\f[R] stateObj = { foo: \[dq]bar\[dq] };
history.pushState(stateObj, \[dq]\[dq], \[dq]bar.html\[dq]);
.EE
.PP
On the next page you could then use \f[CR]history.state\f[R] to access
the \f[CR]stateObj\f[R] that was just added.
.PP
The explanation of these two lines above can be found in the Working
with the History API article.
Then suppose \f[CR]https://www.mozilla.org/bar.html\f[R] executes the
following JavaScript:
.IP
.EX
history.replaceState(stateObj, \[dq]\[dq], \[dq]bar2.html\[dq]);
.EE
.PP
This will cause the URL bar to display
\f[CR]https://www.mozilla.org/bar2.html\f[R], but won\[cq]t cause the
browser to load \f[CR]bar2.html\f[R] or even check that
\f[CR]bar2.html\f[R] exists.
.PP
Suppose now that the user navigates to
\f[CR]https://www.microsoft.com\f[R], then clicks the Back button.
At this point, the URL bar will display
\f[CR]https://www.mozilla.org/bar2.html\f[R].
If the user now clicks Back again, the URL bar will display
\f[CR]https://www.mozilla.org/foo.html\f[R], and totally bypass
bar.html.

.\" Automatically generated by Pandoc 3.2.1
.\"
.TH "CustomElementRegistry.whenDefined" "JS" "September 27, 2023" "JavaScript" "JavaScript Reference Manual"
.SH NAME
CustomElementRegistry.whenDefined \- CustomElementRegistry:
whenDefined() method
.SH SYNOPSIS
The \f[B]\f[CB]whenDefined()\f[B]\f[R] method of the
\f[CR]CustomElementRegistry\f[R] interface returns a \f[CR]Promise\f[R]
that resolves when the named element is defined.
.SH SYNTAX
.IP
.EX
whenDefined(name)
.EE
.SS Parameters
.TP
\f[B]name\f[R]
The name of the custom element.
.SS Return value
A \f[CR]Promise\f[R] that fulfills with the custom element\[cq]s
constructor when a custom element becomes defined with the given name.
If a custom element has already been defined with the name, the promise
will immediately fulfill.
.PP
The promise is rejected with a \f[CR]SyntaxError\f[R]
\f[CR]DOMException\f[R] if the name is not a \c
.UR https://html.spec.whatwg.org/multipage/custom-elements.html#valid-custom-element-name
valid custom element name
.UE \c
\&.
.SH EXAMPLES
This example uses \f[CR]whenDefined()\f[R] to detect when the custom
elements that make up a menu are defined.
The menu displays placeholder content until the actual menu content is
ready to display.
.IP
.EX
<\f[B]nav\f[R] id=\[dq]menu\-container\[dq]>
  <\f[B]div\f[R] class=\[dq]menu\-placeholder\[dq]>Loading\&...</\f[B]div\f[R]>
  <\f[B]nav\f[R]\f[B]\-\f[R]menu>
    <\f[B]menu\-item\f[R]>Item 1</\f[B]menu\-item\f[R]>
    <\f[B]menu\-item\f[R]>Item 2</\f[B]menu\-item\f[R]>
    \&...
    <\f[B]menu\-item\f[R]>Item N</\f[B]menu\-item\f[R]>
  </\f[B]nav\f[R]\f[B]\-menu\f[R]>
</\f[B]nav\f[R]>
.EE
.IP
.EX
\f[B]const\f[R] container = document.getElementById(\[dq]menu\-container\[dq]);
\f[B]const\f[R] placeholder = container.querySelector(\[dq].menu\-placeholder\[dq]);
\f[I]// Fetch all the children of menu that are not yet defined.\f[R]
\f[B]const\f[R] undefinedElements = container.querySelectorAll(\[dq]:not(:defined)\[dq]);

\f[B]async\f[R] \f[B]function\f[R] removePlaceholder() {
  \f[B]const\f[R] promises = [...undefinedElements].map((button) \f[B]=>\f[R]
    customElements.whenDefined(button.localName),
  );

  \f[I]// Wait for all the children to be upgraded\f[R]
  \f[B]await\f[R] Promise.all(promises);
  \f[I]// then remove the placeholder\f[R]
  container.removeChild(placeholder);
}

removePlaceholder();
.EE

.\" Automatically generated by Pandoc 3.2.1
.\"
.TH "MediaSession.setPositionState" "JS" "July 26, 2024" "JavaScript" "JavaScript Reference Manual"
.SH NAME
MediaSession.setPositionState \- MediaSession: setPositionState() method
.SH SYNOPSIS
The \f[B]\f[CB]setPositionState()\f[B]\f[R] method of the
\f[CR]MediaSession\f[R] interface is used to update the current
document\[cq]s media playback position and speed for presentation by
user\[cq]s device in any kind of interface that provides details about
ongoing media.
This can be particularly useful if your code implements a player for
type of media not directly supported by the browser.
.PP
Call this method on the \f[CR]navigator\f[R] object\[cq]s
\f[CR]mediaSession\f[R] object.
.SH SYNTAX
.IP
.EX
setPositionState()
setPositionState(stateDict)
.EE
.SS Parameters
.TP
\f[B]stateDict\f[R] \f[I](optional)\f[R]
An object providing updated information about the playback position and
speed of the document\[cq]s ongoing media.
If the object is empty, the existing playback state information is
cleared.
This object can contain the following parameters:
.RS
.TP
\f[B]duration\f[R] \f[I](optional)\f[R]
A floating\-point value giving the total duration of the current media
in seconds.
This should always be a positive number, with positive infinity
(\f[CR]Infinity\f[R]) indicating media without a defined end, such as a
live stream.
.TP
\f[B]playbackRate\f[R] \f[I](optional)\f[R]
A floating\-point value indicating the rate at which the media is being
played, as a ratio relative to its normal playback speed.
Thus, a value of 1 is playing at normal speed, 2 is playing at double
speed, and so forth.
Negative values indicate that the media is playing in reverse; \-1
indicates playback at the normal speed but backward, \-2 is double speed
in reverse, and so on.
.TP
\f[B]position\f[R] \f[I](optional)\f[R]
A floating\-point value indicating the last reported playback position
of the media in seconds.
This must always be a positive value.
.RE
.SS Return value
None (\f[CR]undefined\f[R]).
.SS Exceptions
.TP
\f[B]TypeError\f[R]
This error can occur in an array of circumstances:
.RS
.IP \[bu] 2
The specified object\[cq]s \f[CR]duration\f[R] is missing, negative, or
\f[CR]null\f[R].
.IP \[bu] 2
Its \f[CR]position\f[R] is either negative or greater than
\f[CR]duration\f[R].
.IP \[bu] 2
Its \f[CR]playbackRate\f[R] is zero.
.RE
.SH EXAMPLES
Below is a function which updates the position state of the current
\f[CR]MediaSession\f[R] track.
.IP
.EX
\f[B]function\f[R] updatePositionState() {
  navigator.mediaSession.setPositionState({
    duration: audioEl.duration,
    playbackRate: audioEl.playbackRate,
    position: audioEl.currentTime,
  });
}
.EE
.PP
We can use this function when updating \f[CR]MediaMetadata\f[R] and
within callbacks for actions, such as below.
.IP
.EX
navigator.mediaSession.setActionHandler(\[dq]seekbackward\[dq], (details) \f[B]=>\f[R] {
  \f[I]// our time to skip\f[R]
  \f[B]const\f[R] skipTime = details.seekOffset || 10;

  \f[I]// set our position\f[R]
  audioEl.currentTime = Math.max(audioEl.currentTime \- skipTime, 0);
  updatePositionState();
});
.EE

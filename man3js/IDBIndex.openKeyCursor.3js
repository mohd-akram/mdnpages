.\" Automatically generated by Pandoc 3.7.0.1
.\"
.TH "IDBINDEX.OPENKEYCURSOR" "3JS" "July 26, 2024" "JavaScript" "JavaScript Reference Manual"
.SH NAME
IDBIndex.openKeyCursor \- IDBIndex: openKeyCursor() method
.SH SYNOPSIS
\f[B]Note:\f[R] This feature is available in Web Workers.
.PP
The \f[B]\f[CB]openKeyCursor()\f[B]\f[R] method of the
\f[CR]IDBIndex\f[R] interface returns an \f[CR]IDBRequest\f[R] object,
and, in a separate thread, creates a cursor over the specified key
range, as arranged by this index.
.PP
The method sets the position of the cursor to the appropriate key, based
on the specified direction.
.PP
If the key range is not specified or is null, then the range includes
all the keys.
.RS
.PP
\f[B]Note:\f[R] Cursors returned by \f[CR]openKeyCursor()\f[R] do not
make the referenced value available as \f[CR]IDBIndex.openCursor\f[R]
does.
This makes obtaining a list of keys much more efficient.
.RE
.SH SYNTAX
.IP
.EX
openKeyCursor()
openKeyCursor(range)
openKeyCursor(range, direction)
.EE
.SS Parameters
.TP
\f[B]range\f[R] \f[I](optional)\f[R]
A key or \f[CR]IDBKeyRange\f[R] to use as the cursor\(cqs range.
If nothing is passed, this will default to a key range that selects all
the records in this object store.
.TP
\f[B]direction\f[R] \f[I](optional)\f[R]
The cursor\(cqs direction.
See IDBCursor Constants for possible values.
.SS Return value
An \f[CR]IDBRequest\f[R] object on which subsequent events related to
this operation are fired.
.PP
If the operation is successful, the value of the request\(cqs
\f[CR]result\f[R] property is:
.IP \(bu 2
an \f[CR]IDBCursor\f[R] object pointing at the first record matching the
given query
.IP \(bu 2
\f[CR]null\f[R] if no matching records were found.
.SS Exceptions
This method may raise a \f[CR]DOMException\f[R] of one of the following
types:
.TP
\f[B]TransactionInactiveError\f[R] \f[B]DOMException\f[R]
Thrown if this \f[CR]IDBIndex\f[R]\(cqs transaction is inactive.
.TP
\f[B]TypeError\f[R]
Thrown if the value for the direction parameter is invalid.
.TP
\f[B]DataError\f[R] \f[B]DOMException\f[R]
Thrown if the key or key range provided contains an invalid key.
.TP
\f[B]InvalidStateError\f[R] \f[B]DOMException\f[R]
Thrown if the \f[CR]IDBIndex\f[R] has been deleted or removed.
.SH EXAMPLES
In the following example we open a transaction and an object store, then
get the index \f[CR]lName\f[R] from a simple contacts database.
We then open a key cursor on the index using \f[CR]openKeyCursor()\f[R]
\(em this works the same as opening a cursor directly on an
\f[CR]ObjectStore\f[R] using \f[CR]IDBObjectStore.openKeyCursor\f[R]
except that the returned records are sorted based on the index, not the
primary key.
.PP
Finally, we iterate through each record in the index, and insert the
last name and the corresponding primary key of the referenced record
into an HTML table.
.IP
.EX
\f[B]function\f[R] displayDataByIndex() {
  tableEntry.textContent = \(dq\(dq;
  \f[B]const\f[R] transaction = db.transaction([\(dqcontactsList\(dq], \(dqreadonly\(dq);
  \f[B]const\f[R] objectStore = transaction.objectStore(\(dqcontactsList\(dq);

  \f[B]const\f[R] myIndex = objectStore.index(\(dqlName\(dq);

  myIndex.openKeyCursor().onsuccess = (event) \f[B]=>\f[R] {
    \f[B]const\f[R] cursor = event.target.result;
    \f[B]if\f[R] (cursor) {
      \f[B]const\f[R] tableRow = document.createElement(\(dqtr\(dq);
      tableRow.appendChild(document.createElement(\(dqtd\(dq)).textContent =
        cursor.key;
      tableRow.appendChild(document.createElement(\(dqtd\(dq)).textContent =
        cursor.primaryKey;
      tableEntry.appendChild(tableRow);

      cursor.continue();
    } \f[B]else\f[R] {
      console.log(\(dqAll last names displayed.\(dq);
    }
  };
}
.EE
.SH SEE ALSO
.IP \(bu 2
Using IndexedDB
.IP \(bu 2
Starting transactions: \f[CR]IDBDatabase\f[R]
.IP \(bu 2
Using transactions: \f[CR]IDBTransaction\f[R]
.IP \(bu 2
Setting a range of keys: \f[CR]IDBKeyRange\f[R]
.IP \(bu 2
Retrieving and making changes to your data: \f[CR]IDBObjectStore\f[R]
.IP \(bu 2
Using cursors: \f[CR]IDBCursor\f[R]
.IP \(bu 2
Reference example: \c
.UR https://github.com/mdn/dom-examples/tree/main/to-do-notifications
To\-do Notifications
.UE \c
\ (\c
.UR https://mdn.github.io/dom-examples/to-do-notifications/
View the example live
.UE \c
).

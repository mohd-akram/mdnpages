.\" Automatically generated by Pandoc 3.1.12.3
.\"
.TH "AudioContext.AudioContext" "JS" "April 6, 2023" "JavaScript" "JavaScript Reference Manual"
.SH NAME
AudioContext.AudioContext \- AudioContext: AudioContext() constructor
.SH SYNOPSIS
The \f[B]\f[CB]AudioContext()\f[B]\f[R] constructor creates a new
\f[CR]AudioContext\f[R] object which represents an audio\-processing
graph, built from audio modules linked together, each represented by an
\f[CR]AudioNode\f[R].
.SH SYNTAX
.IP
.EX
new AudioContext()
new AudioContext(options)
.EE
.SS Parameters
.TP
\f[B]options\f[R] \f[I](optional)\f[R]
An object used to configure the context.
The available properties are:
.RS
.TP
\f[B]latencyHint\f[R] \f[I](optional)\f[R]
The type of playback that the context will be used for, as a predefined
string (\f[CR]\[dq]balanced\[dq]\f[R], \f[CR]\[dq]interactive\[dq]\f[R]
or \f[CR]\[dq]playback\[dq]\f[R]) or a double\-precision floating\-point
value indicating the preferred maximum latency of the context in
seconds.
The user agent may or may not choose to meet this request; check the
value of \f[CR]AudioContext.baseLatency\f[R] to determine the true
latency after creating the context.
.RS
.IP \[bu] 2
\f[CR]\[dq]balanced\[dq]\f[R]: The browser balances audio output latency
and power consumption when selecting a latency value.
.IP \[bu] 2
\f[CR]\[dq]interactive\[dq]\f[R] (default value): The audio is involved
in interactive elements, such as responding to user actions or needing
to coincide with visual cues such as a video or game action.
The browser selects the lowest possible latency that doesn\[cq]t cause
glitches in the audio.
This is likely to require increased power consumption.
.IP \[bu] 2
\f[CR]\[dq]playback\[dq]\f[R]: The browser selects a latency that will
maximize playback time by minimizing power consumption at the expense of
latency.
Useful for non\-interactive playback, such as playing music.
.RE
.TP
\f[B]sampleRate\f[R] \f[I](optional)\f[R]
Indicates the sample rate to use for the new context.
The value must be a floating\-point value indicating the sample rate, in
samples per second, for which to configure the new context;
additionally, the value must be one which is supported by
\f[CR]AudioBuffer.sampleRate\f[R].
The value will typically be between 8,000 Hz and 96,000 Hz; the default
will vary depending on the output device, but the sample rate 44,100 Hz
is the most common.
If the \f[CR]sampleRate\f[R] property is not included in the options, or
the options are not specified when creating the audio context, the new
context\[cq]s output device\[cq]s preferred sample rate is used by
default.
.TP
\f[B]sinkId\f[R] \f[I](optional)\f[R] \f[I](experimental)\f[R]
Specifies the sink ID of the audio output device to use for the
\f[CR]AudioContext\f[R].
This can take one of the following value types:
.RS
.IP \[bu] 2
A string representing the sink ID, retrieved for example via the
\f[CR]deviceId\f[R] property of the \f[CR]MediaDeviceInfo\f[R] objects
returned by \f[CR]MediaDevices.enumerateDevices()\f[R].
.IP \[bu] 2
An object representing different options for a sink ID.
Currently, this takes a single property, \f[CR]type\f[R], with a value
of \f[CR]none\f[R].
Setting this parameter causes the audio to be processed without being
played through any audio output device.
.RE
.RE
.SS Return value
A new \f[CR]AudioContext\f[R] instance.
.SS Exceptions
.TP
\f[B]NotSupportedError\f[R] \f[B]DOMException\f[R]
Thrown if the specified \f[CR]sampleRate\f[R] isn\[cq]t supported by the
context.
.SH USAGE NOTES
The specification doesn\[cq]t go into a lot of detail about things like
how many audio contexts a user agent should support, or minimum or
maximum latency requirements (if any), so these details can vary from
browser to browser.
Be sure to check the values if they matter to you.
.PP
In particular, the specification doesn\[cq]t indicate a maximum or
minimum number of audio contexts that must be able to be open at the
same time, so this is left up to the browser implementations to decide.
.SS Google Chrome
.SS Per\-tab audio context limitation in Chrome
Prior to version 66 Google Chrome only supported up to six audio
contexts \f[I]per tab\f[R] at a time.
.SS Non\-standard exceptions in Chrome
If the value of the \f[CR]latencyHint\f[R] property isn\[cq]t valid,
Chrome throws a \f[CR]TypeError\f[R] exception with the message \[lq]The
provided value `\&...' is not a valid enum value of type
AudioContextLatencyCategory\[rq].
.SH EXAMPLE
This example creates a new \f[CR]AudioContext\f[R] for interactive audio
(optimizing for latency), with a sample rate of 44.1kHz and a specific
audio output.
.IP
.EX
\f[B]const\f[R] audioCtx = \f[B]new\f[R] AudioContext({
  latencyHint: \[dq]interactive\[dq],
  sampleRate: 44100,
  sinkId: \[dq]bb04fea9a8318c96de0bd...\[dq], \f[I]// truncated for brevity\f[R]
});
.EE
.SH SEE ALSO
.IP \[bu] 2
\f[CR]new OfflineAudioContext()\f[R] constructor

.\" Automatically generated by Pandoc 3.4
.\"
.TH "IDBFactory.databases" "JS" "July 29, 2024" "JavaScript" "JavaScript Reference Manual"
.SH NAME
IDBFactory.databases \- IDBFactory: databases() method
.SH SYNOPSIS
\f[B]Note:\f[R] This feature is available in Web Workers.
.PP
The \f[B]\f[CB]databases\f[B]\f[R] method of the \f[CR]IDBFactory\f[R]
interface returns a \f[CR]Promise\f[R] that fulfills with an array of
objects containing the name and version of all the available databases.
.PP
This is a snapshot of the databases, intended primarily to allow web
applications to check what databases have been created \[em] in order
to, for example, clean up databases created by earlier versions of
application code.
.SH SYNTAX
.IP
.EX
databases()
.EE
.SS Parameters
None.
.SS Return value
A \f[CR]Promise\f[R] that fulfills with an array of objects representing
a snapshot of the available databases (or rejects with the
error/exceptions below).
.PP
Each array object has the following properties:
.TP
\f[B]name\f[R]
A database name.
.TP
\f[B]version\f[R]
The database version.
.PP
Note that the sequence on the returned objects is undefined.
.SS Exceptions
.TP
\f[B]SecurityError\f[R] \f[B]DOMException\f[R]
Thrown if the method is called from an \c
.UR https://stackoverflow.com/questions/42239643/when-do-browsers-send-the-origin-header-when-do-browsers-set-the-origin-to-null/42242802#42242802
opaque origin
.UE \c
\ or the user has disabled storage.
.TP
\f[B]UnknownError\f[R] \f[B]DOMException\f[R]
Thrown if the set of available databases cannot be determined for any
reason.
.SH EXAMPLES
.SS Create and list databases
This example creates/opens a number of databases.
On successful initialization of each database it lists all the available
databases.
.SS JavaScript
First we define the function that is used to get and log the available
databases.
This awaits on the promise returned by \f[CR]indexedDB.databases()\f[R]
and then iterates the array and lists the values of each element:
.IP
.EX
\f[B]async\f[R] \f[B]function\f[R] getDb() {
  \f[B]const\f[R] databases = \f[B]await\f[R] indexedDB.databases();
  log(\[dq]List databases:\[dq]);
  databases.forEach((element) \f[B]=>\f[R] {
    log(\[ga]name: ${element.name}, version: ${element.version}\[ga]);
  });
}
.EE
.PP
To demonstrate how the above function is used, below we create two
databases.
For each database, we log just before the database is opened.
We also log on successful initialization (or error) and then also log
the available databases.
.IP
.EX
\f[I]// Create a database named toDoList with default version (1)\f[R]
\f[B]const\f[R] dbName1 = \[dq]toDoList\[dq];
log(\[ga]Opening: ${dbName1}\[ga]);
\f[B]let\f[R] DBOpenRequest = window.indexedDB.open(dbName1);

DBOpenRequest.addEventListener(\[dq]error\[dq], (event) \f[B]=>\f[R] {
  log(\[ga]Error opening: ${dbName1}\[ga]);
  getDb();
});

DBOpenRequest.addEventListener(\[dq]success\[dq], (event) \f[B]=>\f[R] {
  log(\[ga]Initialized: ${dbName1}\[ga]);
  getDb();
});

\f[I]// Create database \[dq]AnotherDb\[dq]\f[R]
\f[B]const\f[R] dbName2 = \[dq]AnotherDb\[dq];
log(\[ga]Opening ${dbName2}\[ga]);
DBOpenRequest = window.indexedDB.open(dbName2, 2);

DBOpenRequest.addEventListener(\[dq]error\[dq], (event) \f[B]=>\f[R] {
  log(\[ga]Error opening: ${dbName2}\[ga]);
  getDb();
});

DBOpenRequest.addEventListener(\[dq]success\[dq], (event) \f[B]=>\f[R] {
  log(\[ga]Initialized: ${dbName2}\[ga]);
  getDb();
});
.EE
.SS Result
The result is shown below.
Note that the time taken to get the databases and their order is
undefined.
.SH SEE ALSO
.IP \[bu] 2
Using IndexedDB
.IP \[bu] 2
Starting transactions: \f[CR]IDBDatabase\f[R]
.IP \[bu] 2
Using transactions: \f[CR]IDBTransaction\f[R]
.IP \[bu] 2
Setting a range of keys: \f[CR]IDBKeyRange\f[R]
.IP \[bu] 2
Retrieving and making changes to your data: \f[CR]IDBObjectStore\f[R]
.IP \[bu] 2
Using cursors: \f[CR]IDBCursor\f[R]
.IP \[bu] 2
Reference example: \c
.UR https://github.com/mdn/dom-examples/tree/main/to-do-notifications
To\-do Notifications
.UE \c
\ (\c
.UR https://mdn.github.io/dom-examples/to-do-notifications/
View the example live
.UE \c
).

.\" Automatically generated by Pandoc 3.6.2
.\"
.TH "LargestContentfulPaint" "JS" "January 22, 2025" "JavaScript" "JavaScript Reference Manual"
.SH NAME
LargestContentfulPaint \- LargestContentfulPaint
.SH SYNOPSIS
The \f[CR]LargestContentfulPaint\f[R] interface provides timing
information about the largest image or text paint before user input on a
web page.
.SH DESCRIPTION
The key moment this API provides is the Largest Contentful Paint (LCP)
metric.
It provides the render time of the largest image or text block visible
within the viewport, recorded from when the page first begins to load.
The following elements are considered when determining the LCP:
.IP \[bu] 2
\f[CR]<img>\f[R] elements.
.IP \[bu] 2
\f[CR]<image>\f[R] elements inside an SVG.
.IP \[bu] 2
The poster images of \f[CR]<video>\f[R] elements.
.IP \[bu] 2
Elements with a \f[CR]background\-image\f[R].
.IP \[bu] 2
Groups of text nodes, such as \f[CR]<p>\f[R].
.PP
To measure render times of other elements, use the
\f[CR]PerformanceElementTiming\f[R] API.
.PP
Additional key paint moments are provided by the
\f[CR]PerformancePaintTiming\f[R] API:
.IP \[bu] 2
First Paint (FP): Time when anything is rendered.
Note that the marking of the first paint is optional, not all user
agents report it.
.IP \[bu] 2
First Contentful Paint (FCP): Time when the first bit of DOM text or
image content is rendered.
.PP
\f[CR]LargestContentfulPaint\f[R] inherits from
\f[CR]PerformanceEntry\f[R].
.SH INSTANCE PROPERTIES
This interface extends the following \f[CR]PerformanceEntry\f[R]
properties by qualifying and constraining the properties as follows:
.TP
\f[B]PerformanceEntry.entryType\f[R] \f[I](read\-only)\f[R] \f[I](experimental)\f[R]
Returns \f[CR]\[dq]largest\-contentful\-paint\[dq]\f[R].
.TP
\f[B]PerformanceEntry.name\f[R] \f[I](read\-only)\f[R] \f[I](experimental)\f[R]
Always returns an empty string.
.TP
\f[B]PerformanceEntry.startTime\f[R] \f[I](read\-only)\f[R] \f[I](experimental)\f[R]
Returns the value of this entry\[cq]s \f[CR]renderTime\f[R] if it is not
\f[CR]0\f[R], otherwise the value of this entry\[cq]s
\f[CR]loadTime\f[R].
.TP
\f[B]PerformanceEntry.duration\f[R] \f[I](read\-only)\f[R] \f[I](experimental)\f[R]
Returns \f[CR]0\f[R], as \f[CR]duration\f[R] is not applicable to this
interface.
.PP
It also supports the following properties:
.TP
\f[B]LargestContentfulPaint.element\f[R] \f[I](read\-only)\f[R]
The element that is the current largest contentful paint.
.TP
\f[B]LargestContentfulPaint.renderTime\f[R] \f[I](read\-only)\f[R]
The time the element was rendered to the screen.
May not be available if the element is a cross\-origin image loaded
without the \f[CR]Timing\-Allow\-Origin\f[R] header.
.TP
\f[B]LargestContentfulPaint.loadTime\f[R] \f[I](read\-only)\f[R]
The time the element was loaded.
.TP
\f[B]LargestContentfulPaint.size\f[R] \f[I](read\-only)\f[R]
The intrinsic size of the element returned as the area (width * height).
.TP
\f[B]LargestContentfulPaint.id\f[R] \f[I](read\-only)\f[R]
The id of the element.
This property returns an empty string when there is no id.
.TP
\f[B]LargestContentfulPaint.url\f[R] \f[I](read\-only)\f[R]
If the element is an image, the request url of the image.
.SH INSTANCE METHODS
\f[I]This interface also inherits methods from
\f[CI]PerformanceEntry\f[I].\f[R]
.TP
\f[B]LargestContentfulPaint.toJSON()\f[R]
Returns a JSON representation of the \f[CR]LargestContentfulPaint\f[R]
object.
.SH EXAMPLES
.SS Observing the largest contentful paint
In the following example, an observer is registered to get the largest
contentful paint while the page is loading.
The \f[CR]buffered\f[R] flag is used to access data from before observer
creation.
.PP
The LCP API analyzes all content it finds (including content that is
removed from the DOM).
When new largest content is found, it creates a new entry.
It stops searching for larger content when scroll or input events occur,
since these events likely introduce new content on the website.
Thus the LCP is the last performance entry reported by the observer.
.IP
.EX
\f[B]const\f[R] observer = \f[B]new\f[R] PerformanceObserver((list) \f[B]=>\f[R] {
  \f[B]const\f[R] entries = list.getEntries();
  \f[B]const\f[R] lastEntry = entries[entries.length \- 1]; \f[I]// Use the latest LCP candidate\f[R]
  console.log(\[dq]LCP:\[dq], lastEntry.startTime);
  console.log(lastEntry);
});
observer.observe({ type: \[dq]largest\-contentful\-paint\[dq], buffered: \f[B]true\f[R] });
.EE
.SS Cross\-origin image render time
For security reasons, the value of the \f[CR]renderTime\f[R] property
was originally \f[CR]0\f[R] if the resource is a cross\-origin request.
Instead the \f[CR]loadTime\f[R] property should be used as a fallback.
.PP
Browsers \c
.UR https://github.com/w3c/paint-timing/issues/104
may now expose a slightly coarsened render time
.UE \c
\ in these situations.
Check for browser support.
.PP
To expose more accurate cross\-origin render\-time information, the
\f[CR]Timing\-Allow\-Origin\f[R] HTTP response header needs to be set.
.PP
For example, to allow \f[CR]https://developer.mozilla.org\f[R] to see an
accurate \f[CR]renderTime\f[R], the cross\-origin resource should send:
.IP
.EX
Timing\-Allow\-Origin: https://developer.mozilla.org
.EE
.PP
Like in the code example, you can use \f[CR]startTime\f[R], which
returns the value of the entry\[cq]s \f[CR]renderTime\f[R] if it is not
\f[CR]0\f[R], and otherwise the value of this entry\[cq]s
\f[CR]loadTime\f[R].
However, it is recommended to set the \f[CR]Timing\-Allow\-Origin\f[R]
header so that the metrics will be more accurate.
.PP
If you use \f[CR]startTime\f[R], you can flag any inaccuracies by
checking if \f[CR]renderTime\f[R] was used:
.IP
.EX
\f[B]const\f[R] isAccurateLCP = entry.renderTime ? \f[B]true\f[R] : \f[B]false\f[R];
.EE
.SH SEE ALSO
.IP \[bu] 2
Largest Contentful Paint
.IP \[bu] 2
First Contentful Paint
.IP \[bu] 2
First Paint

.\" Automatically generated by Pandoc 3.1.12.3
.\"
.TH "RTCIceTransport.state" "JS" "March 25, 2024" "JavaScript" "JavaScript Reference Manual"
.SH NAME
RTCIceTransport.state \- RTCIceTransport: state property
.SH SYNOPSIS
The \f[B]\f[CB]state\f[B]\f[R] read\-only property of the
\f[CR]RTCIceTransport\f[R] interface returns the current state of the
ICE transport, so you can determine the state of ICE gathering in which
the ICE agent currently is operating.
.PP
This differs from the \f[CR]gatheringState\f[R], which only indicates
whether or not ICE gathering is currently underway.
It also differs from \f[CR]RTCPeerConnection.connectionState\f[R], which
aggregates the states across every \f[CR]RTCIceTransport\f[R] used by
every \f[CR]RTCRtpSender\f[R] and every \f[CR]RTCRtpReceiver\f[R] on the
entire connection.
.SH VALUE
A string whose value is one of the following:
.TP
\f[B]\[dq]new\[dq]\f[R]
The \f[CR]RTCIceTransport\f[R] is currently gathering local candidates,
or is waiting for the remote device to begin to transmit the remote
candidates, or both.
In this state, checking of candidates to look for those which might be
acceptable has not yet begun.
.TP
\f[B]\[dq]checking\[dq]\f[R]
At least one remote candidate has been received, and the
\f[CR]RTCIceTransport\f[R] has begun examining pairings of remote and
local candidates in order to attempt to identify viable pairs that could
be used to establish a connection.
Keep in mind that gathering of local candidates may still be underway,
and, similarly, the remote device also may still be gathering candidates
of its own.
.TP
\f[B]\[dq]connected\[dq]\f[R]
A viable candidate pair has been found and selected, and the
\f[CR]RTCIceTransport\f[R] has connected the two peers together using
that pair.
However, there are still candidates pairings to consider, and there may
still be gathering underway on one or both of the two devices.
.RS
.PP
The transport may revert from the \f[CR]\[dq]connected\[dq]\f[R] state
to the \f[CR]\[dq]checking\[dq]\f[R] state if either peer decides to
cancel consent to use the selected candidate pair, and may revert to
\f[CR]\[dq]disconnected\[dq]\f[R] if there are no candidates left to
check but one or both clients are still gathering candidates.
.RE
.TP
\f[B]\[dq]completed\[dq]\f[R]
The transport has finished gathering local candidates and has received a
notification from the remote peer that no more candidates will be sent.
In addition, all candidate pairs have been considered and a pair has
been selected for use.
If consent checks fail on all successful candidate pairs, the transport
state will change to \f[CR]\[dq]failed\[dq]\f[R].
.TP
\f[B]\[dq]disconnected\[dq]\f[R]
The ICE agent has determined that connectivity has been lost for this
\f[CR]RTCIceTransport\f[R].
This is not a failure state (that\[cq]s \f[CR]\[dq]failed\[dq]\f[R]).
A value of \f[CR]\[dq]disconnected\[dq]\f[R] means that a transient
issue has occurred that has broken the connection, but that should
resolve itself automatically without your code having to take any
action.
See The disconnected state for additional details.
.TP
\f[B]\[dq]failed\[dq]\f[R]
The \f[CR]RTCIceTransport\f[R] has finished the gathering process, has
received the \[lq]no more candidates\[rq] notification from the remote
peer, and has finished checking pairs of candidates, without
successfully finding a pair that is both valid and for which consent can
be obtained.
\f[I]This is a terminal state, indicating that the connection cannot be
achieved or maintained.\f[R]
.TP
\f[B]\[dq]closed\[dq]\f[R]
The transport has shut down and is no longer responding to STUN
requests.
.SH USAGE NOTES
If an ICE restart occurs, the candidate gathering and connectivity check
process is started over again; this will cause a transition from the
\f[CR]\[dq]connected\[dq]\f[R] state if the restart occurred while the
state was \f[CR]\[dq]completed\[dq]\f[R].
If the restart occurred during a transient
\f[CR]\[dq]disconnected\[dq]\f[R] state, the state transitions to
\f[CR]\[dq]checking\[dq]\f[R]
.SS The disconnected state
\f[CR]\[dq]disconnected\[dq]\f[R] is a transient state that occurs when
the connection between the two peers fails in a manner that the WebRTC
infrastructure can automatically correct once the connection is
available again.
It is \f[I]not\f[R] a failure state.
Instead, you can think of \f[CR]\[dq]disconnected\[dq]\f[R] as being
similar to \f[CR]\[dq]checking\[dq]\f[R] but with the added information
that the connection had been working but at the moment is not.
.PP
Every user agent and platform may have its own scenarios that can
trigger the \f[CR]\[dq]disconnected\[dq]\f[R] state.
Possible causes include:
.IP \[bu] 2
The network interface being used by the connection has gone offline.
.IP \[bu] 2
STUN requests being sent to the remote device have gone unanswered
repeatedly.
.PP
The \f[CR]\[dq]disconnected\[dq]\f[R] state can also occur when the
transport has finished checking all existing candidate pairs and has not
found a pair that will work\[em]or a valid pair was found but rejected
due to consent to use the pair being denied.
In this scenario, the transport is still continuing to gather
candidates, and/or to wait for candidates to be sent by the remote peer.

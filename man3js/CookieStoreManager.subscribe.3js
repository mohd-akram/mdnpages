.\" Automatically generated by Pandoc 3.4
.\"
.TH "CookieStoreManager.subscribe" "JS" "May 15, 2024" "JavaScript" "JavaScript Reference Manual"
.SH NAME
CookieStoreManager.subscribe \- CookieStoreManager: subscribe() method
.SH SYNOPSIS
\f[B]Secure context:\f[R] This feature is available only in secure
contexts (HTTPS).
.PP
\f[B]Note:\f[R] This feature is available in Service Workers.
.PP
The \f[B]\f[CB]subscribe()\f[B]\f[R] method of the
\f[CR]CookieStoreManager\f[R] interface subscribes a
\f[CR]ServiceWorkerRegistration\f[R] to cookie change events.
.SH SYNTAX
.IP
.EX
subscribe(subscriptions)
.EE
.SS Parameters
.TP
\f[B]subscriptions\f[R]
An array of objects, each of which has the following properties:
.RS
.TP
\f[B]name\f[R]
A string with the name of a cookie.
.TP
\f[B]url\f[R]
A string with the url of a cookie scope.
This may be narrower than the scope of the service worker registration.
.RE
.SS Return value
A \f[CR]Promise\f[R] that resolves with \f[CR]undefined\f[R] when the
subscription completes.
.SS Exceptions
.TP
\f[B]TypeError\f[R]
Thrown if the URL passed in \f[CR]subscriptions\f[R] does not match the
service worker registration\[cq]s \f[CR]scope\f[R].
.SH EXAMPLES
In this example, the \f[CR]ServiceWorkerRegistration\f[R] represented by
\f[CR]registration\f[R] is subscribing to change events on the cookie
named \f[CR]\[dq]cookie1\[dq]\f[R] with a scope of
\f[CR]\[dq]/path1\[dq]\f[R].
.IP
.EX
\f[B]const\f[R] subscriptions = [{ name: \[dq]cookie1\[dq], url: \[ga]/path1\[ga] }];
\f[B]await\f[R] registration.cookies.subscribe(subscriptions);
.EE
.PP
The URL passed to the \f[CR]subscribe()\f[R] method, may be narrower
than the service worker registration scope.
In the following example the subscription is for \f[CR]/path/one/\f[R],
so it will receive change events for changes on the first cookie, but
not the second.
.IP
.EX
registration.cookies.subscribe([{ name: \[dq]cookie1\[dq], url: \[dq]/path/one/\[dq] }]); \f[I]// subscription\f[R]
cookieStore.set({ name: \[dq]cookie1\[dq], value: \[dq]cookie\-value\[dq], path: \[dq]/path/one/\[dq] }); \f[I]// receives a change event\f[R]
cookieStore.set({ name: \[dq]cookie1\[dq], value: \[dq]cookie\-value\[dq], path: \[dq]/path/two/\[dq] }); \f[I]// does not receive a change event\f[R]
.EE

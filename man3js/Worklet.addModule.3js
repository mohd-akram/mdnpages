.\" Automatically generated by Pandoc 3.6.2
.\"
.TH "Worklet.addModule" "JS" "February 5, 2024" "JavaScript" "JavaScript Reference Manual"
.SH NAME
Worklet.addModule \- Worklet: addModule() method
.SH SYNOPSIS
\f[B]Secure context:\f[R] This feature is available only in secure
contexts (HTTPS).
.PP
The \f[B]\f[CB]addModule()\f[B]\f[R] method of the \f[CR]Worklet\f[R]
interface loads the module in the given JavaScript file and adds it to
the current \f[CR]Worklet\f[R].
.SH SYNTAX
.IP
.EX
addModule(moduleURL)
addModule(moduleURL, options)
.EE
.SS Parameters
.TP
\f[B]moduleURL\f[R]
A \f[CR]String\f[R] containing the URL of a JavaScript file with the
module to add.
.TP
\f[B]options\f[R] \f[I](optional)\f[R]
An object with any of the following options:
.RS
.TP
\f[B]credentials\f[R]
A \f[CR]Request.credentials\f[R] value that indicates whether to send
credentials (e.g.\ cookies and HTTP authentication) when loading the
module.
Can be one of \f[CR]\[dq]omit\[dq]\f[R],
\f[CR]\[dq]same\-origin\[dq]\f[R], or \f[CR]\[dq]include\[dq]\f[R].
Defaults to \f[CR]\[dq]same\-origin\[dq]\f[R].
See also \f[CR]Request.credentials\f[R].
.RE
.SS Return value
A \f[CR]Promise\f[R] that resolves once the module from the given URL
has been added.
The promise doesn\[cq]t return any value.
.SS Exceptions
If \f[CR]addModule()\f[R] fails, it rejects the promise, delivering one
of the following errors to the rejection handler.
.TP
\f[B]AbortError\f[R] \f[B]DOMException\f[R]
The specified script is invalid or could not be loaded.
.TP
\f[B]SyntaxError\f[R] \f[B]DOMException\f[R]
The specified \f[CR]moduleURL\f[R] is invalid.
.SH EXAMPLES
.SS AudioWorklet example
.IP
.EX
\f[B]const\f[R] audioCtx = \f[B]new\f[R] AudioContext();
\f[B]const\f[R] audioWorklet = audioCtx.audioWorklet;
audioWorklet.addModule(\[dq]modules/bypassFilter.js\[dq], {
  credentials: \[dq]omit\[dq],
});
.EE
.SS PaintWorklet example
.IP
.EX
CSS.paintWorklet.addModule(
  \[dq]https://mdn.github.io/houdini\-examples/cssPaint/intro/worklets/hilite.js\[dq],
);
.EE
.PP
Once the script has been added to the paint worklet, the CSS
\f[CR]paint()\f[R] function can be used to include the image created by
the worklet:
.IP
.EX
\f[B]\[at]supports\f[R] (\f[B]background\-image\f[R]: paint(id)) {
  h1 {
    \f[B]background\-image\f[R]: paint(hollowHighlights, filled, 3px);
  }
}
.EE

.\" Automatically generated by Pandoc 3.1.12.3
.\"
.TH "ScreenOrientation.lock" "JS" "November 9, 2023" "JavaScript" "JavaScript Reference Manual"
.SH NAME
ScreenOrientation.lock \- ScreenOrientation: lock() method
.SH SYNOPSIS
The \f[B]\f[CB]lock()\f[B]\f[R] property of the
\f[CR]ScreenOrientation\f[R] interface locks the orientation of the
containing document to the specified orientation.
.PP
Typically orientation locking is only enabled on mobile devices, and
when the browser context is full screen.
If locking is supported, then it must work for all the parameter values
listed below.
.SH SYNTAX
.IP
.EX
lock(orientation)
.EE
.SS Parameters
.TP
\f[B]orientation\f[R]
An orientation lock type.
One of the following:
.RS
.TP
\f[B]\[dq]any\[dq]\f[R]
Any of \f[CR]portrait\-primary\f[R], \f[CR]portrait\-secondary\f[R],
\f[CR]landscape\-primary\f[R] or \f[CR]landscape\-secondary\f[R].
.TP
\f[B]\[dq]natural\[dq]\f[R]
The natural orientation of the screen from the underlying operating
system: either \f[CR]portrait\-primary\f[R] or
\f[CR]landscape\-primary\f[R].
.TP
\f[B]\[dq]landscape\[dq]\f[R]
An orientation where screen width is greater than the screen height.
Depending on the platform convention, this may be
\f[CR]landscape\-primary\f[R], \f[CR]landscape\-secondary\f[R], or both.
.TP
\f[B]\[dq]portrait\[dq]\f[R]
An orientation where screen height is greater than the screen width.
Depending on the platform convention, this may be
\f[CR]portrait\-primary\f[R], \f[CR]portrait\-secondary\f[R], or both.
.TP
\f[B]\[dq]portrait\-primary\[dq]\f[R]
The \[lq]primary\[rq] portrait mode.
If the natural orientation is a portrait mode (screen height is greater
than width), this will be the same as the natural orientation, and
correspond to an angle of 0 degrees.
If the natural orientation is a landscape mode, then the user agent can
choose either portrait orientation as the \f[CR]portrait\-primary\f[R]
and \f[CR]portrait\-secondary\f[R]; one of those will be assigned the
angle of 90 degrees and the other will have an angle of 270 degrees.
.TP
\f[B]\[dq]portrait\-secondary\[dq]\f[R]
The secondary portrait orientation.
If the natural orientation is a portrait mode, this will have an angle
of 180 degrees (in other words, the device is upside down relative to
its natural orientation).
If the natural orientation is a landscape mode, this can be either
orientation as selected by the user agent: whichever was not selected
for \f[CR]portrait\-primary\f[R].
.TP
\f[B]\[dq]landscape\-primary\[dq]\f[R]
The \[lq]primary\[rq] landscape mode.
If the natural orientation is a landscape mode (screen width is greater
than height), this will be the same as the natural orientation, and
correspond to an angle of 0 degrees.
If the natural orientation is a portrait mode, then the user agent can
choose either landscape orientation as the \f[CR]landscape\-primary\f[R]
with an angle of either 90 or 270 degrees
(\f[CR]landscape\-secondary\f[R] will be the other orientation and
angle).
.TP
\f[B]\[dq]landscape\-secondary\[dq]\f[R]
The secondary landscape mode.
If the natural orientation is a landscape mode, this orientation is
upside down relative to the natural orientation, and will have an angle
of 180 degrees.
If the natural orientation is a portrait mode, this can be either
orientation as selected by the user agent: whichever was not selected
for \f[CR]landscape\-primary\f[R].
.RE
.SS Return value
A \f[CR]Promise\f[R] that resolves after locking succeeds.
.SS Exceptions
The promise may be rejected with the following exceptions:
.TP
\f[B]InvalidStateError\f[R] \f[B]DOMException\f[R]
Thrown if the document is not fully active.
.TP
\f[B]SecurityError\f[R] \f[B]DOMException\f[R]
Thrown if the document\[cq]s visibility state is hidden or if the
document is forbidden to use the feature (for example, by omitting the
keyword \f[CR]allow\-orientation\-lock\f[R] of the \f[CR]sandbox\f[R]
attribute of the \f[CR]iframe\f[R] element).
.TP
\f[B]NotSupportedError\f[R] \f[B]DOMException\f[R]
Thrown if the user agent does not support locking the screen orientation
of the specific orientation.
.TP
\f[B]AbortError\f[R] \f[B]DOMException\f[R]
Thrown if there is any other \f[CR]lock()\f[R] method invoking.
.SH EXAMPLES
This example shows how to lock the screen to the opposite orientation of
the current one.
Note that this example will only work on mobile devices and other
devices that support orientation changes.
.IP
.EX
<\f[B]div\f[R] id=\[dq]example_container\[dq]>
  <\f[B]button\f[R] id=\[dq]fullscreen_button\[dq]>Fullscreen</\f[B]button\f[R]>
  <\f[B]button\f[R] id=\[dq]lock_button\[dq]>Lock</\f[B]button\f[R]>
  <\f[B]button\f[R] id=\[dq]unlock_button\[dq]>Unlock</\f[B]button\f[R]>
  <\f[B]textarea\f[R] id=\[dq]log\[dq] rows=\[dq]7\[dq] cols=\[dq]85\[dq]></\f[B]textarea\f[R]>
</\f[B]div\f[R]>
.EE
.IP
.EX
\f[B]const\f[R] log = document.getElementById(\[dq]log\[dq]);

\f[I]// Lock button: Lock the screen to the other orientation (rotated by 90 degrees)\f[R]
\f[B]const\f[R] rotate_btn = document.querySelector(\[dq]#lock_button\[dq]);
rotate_btn.addEventListener(\[dq]click\[dq], () \f[B]=>\f[R] {
  log.textContent += \[ga]Lock pressed \[rs]n\[ga];

  \f[B]const\f[R] oppositeOrientation = screen.orientation.type.startsWith(\[dq]portrait\[dq])
    ? \[dq]landscape\[dq]
    : \[dq]portrait\[dq];
  screen.orientation
    .lock(oppositeOrientation)
    .then(() \f[B]=>\f[R] {
      log.textContent = \[ga]Locked to ${oppositeOrientation}\[rs]n\[ga];
    })
    .catch((error) \f[B]=>\f[R] {
      log.textContent += \[ga]${error}\[rs]n\[ga];
    });
});

\f[I]// Unlock button: Unlock the screen orientation (if locked)\f[R]
\f[B]const\f[R] unlock_btn = document.querySelector(\[dq]#unlock_button\[dq]);
unlock_btn.addEventListener(\[dq]click\[dq], () \f[B]=>\f[R] {
  log.textContent += \[dq]Unlock pressed \[rs]n\[dq];
  screen.orientation.unlock();
});

\f[I]// Full screen button: Set the example to fullscreen.\f[R]
\f[B]const\f[R] fullscreen_btn = document.querySelector(\[dq]#fullscreen_button\[dq]);
fullscreen_btn.addEventListener(\[dq]click\[dq], () \f[B]=>\f[R] {
  log.textContent += \[dq]Fullscreen pressed \[rs]n\[dq];
  \f[B]const\f[R] container = document.querySelector(\[dq]#example_container\[dq]);
  container.requestFullscreen().catch((error) \f[B]=>\f[R] {
    log.textContent += \[ga]${error}\[rs]n\[ga];
  });
});
.EE
.PP
To test the example, first press the Fullscreen button.
Once the example is full screen, press the Lock button to switch the
orientation, and Unlock to return to the natural orientation.

.\" Automatically generated by Pandoc 3.2.1
.\"
.TH "WebTransport.createUnidirectionalStream" "JS" "March 6, 2024" "JavaScript" "JavaScript Reference Manual"
.SH NAME
WebTransport.createUnidirectionalStream \- WebTransport:
createUnidirectionalStream() method
.SH SYNOPSIS
\f[B]Secure context:\f[R] This feature is available only in secure
contexts (HTTPS).
.PP
\f[B]Note:\f[R] This feature is available in Web Workers.
.PP
The \f[B]\f[CB]createUnidirectionalStream()\f[B]\f[R] method of the
\f[CR]WebTransport\f[R] interface asynchronously opens a unidirectional
stream.
.PP
The method returns a \f[CR]Promise\f[R] that resolves to a
\f[CR]WritableStream\f[R] object, which can be used to reliably write
data to the server.
.PP
\[lq]Reliable\[rq] means that transmission and order of data are
guaranteed.
This provides slower delivery (albeit faster than with WebSockets) than
\f[CR]datagrams\f[R], but is needed in situations where reliability and
ordering are important, like chat applications.
.PP
The relative order in which queued bytes are emptied from created
streams can be specified using the \f[CR]sendOrder\f[R] option.
If set, queued bytes in streams with a higher send order are guaranteed
to be sent before queued bytes for streams with a lower send order.
If the order number is not set then the order in which bytes are sent is
implementation dependent.
Note however that even though bytes from higher send\-order streams are
sent first, they may not arrive first.
.SH SYNTAX
.IP
.EX
createUnidirectionalStream()
createUnidirectionalStream(options)
.EE
.SS Parameters
.TP
\f[B]options\f[R] \f[I](optional)\f[R]
An object that may have the following properties:
.RS
.TP
\f[B]sendOrder\f[R] \f[I](optional)\f[R]
A integer value specifying the send priority of this stream relative to
other streams for which the value has been set.
Queued bytes are sent first for streams that have a higher value.
If not set, the send order depends on the implementation.
.RE
.SS Return value
A \f[CR]Promise\f[R] that resolves to a
\f[CR]WebTransportSendStream\f[R] object (this is a
\f[CR]WritableStream\f[R]).
.SS Exceptions
.TP
\f[B]InvalidStateError\f[R] \f[B]DOMException\f[R]
Thrown if \f[CR]createUnidirectionalStream()\f[R] is invoked while the
WebTransport is closed or failed.
.SH EXAMPLES
Use the \f[CR]createUnidirectionalStream()\f[R] method to get a
reference to a \f[CR]WritableStream\f[R].
From this you can get a writer to allow data to be written to the stream
and sent to the server.
.PP
Use the \f[CR]close()\f[R] method of the resulting
\f[CR]WritableStreamDefaultWriter\f[R] to close the associated HTTP/3
connection.
The browser tries to send all pending data before actually closing the
associated connection.
.IP
.EX
\f[B]async\f[R] \f[B]function\f[R] writeData() {
  \f[B]const\f[R] stream = \f[B]await\f[R] transport.createUnidirectionalStream({
    sendOrder: \[dq]596996858\[dq],
  });
  \f[B]const\f[R] writer = stream.writable.getWriter();
  \f[B]const\f[R] data1 = \f[B]new\f[R] Uint8Array([65, 66, 67]);
  \f[B]const\f[R] data2 = \f[B]new\f[R] Uint8Array([68, 69, 70]);
  writer.write(data1);
  writer.write(data2);

  \f[B]try\f[R] {
    \f[B]await\f[R] writer.close();
    console.log(\[dq]All data has been sent.\[dq]);
  } \f[B]catch\f[R] (error) {
    console.error(\[ga]An error occurred: ${error}\[ga]);
  }
}
.EE
.PP
You can also use \f[CR]WritableStreamDefaultWriter.abort()\f[R] to
abruptly terminate the stream.
When using \f[CR]abort()\f[R], the browser may discard any pending data
that hasn\[cq]t yet been sent.
.IP
.EX
\f[I]// ...\f[R]

\f[B]const\f[R] stream = \f[B]await\f[R] transport.createUnidirectionalStream();
\f[B]const\f[R] writer = ws.getWriter();

\f[I]// ...\f[R]

writer.write(...);
writer.write(...);
\f[B]await\f[R] writer.abort();
\f[I]// Not all the data may have been written.\f[R]
.EE
.SH SEE ALSO
.IP \[bu] 2
\c
.UR https://developer.chrome.com/docs/capabilities/web-apis/webtransport
Using WebTransport
.UE \c
.IP \[bu] 2
\f[CR]WebTransport.createBidirectionalStream()\f[R]
.IP \[bu] 2
WebSockets API
.IP \[bu] 2
Streams API
.IP \[bu] 2
\c
.UR https://datatracker.ietf.org/doc/html/draft-ietf-webtrans-http3/
WebTransport over HTTP/3
.UE \c

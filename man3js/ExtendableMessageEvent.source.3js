.\" Automatically generated by Pandoc 3.1.11
.\"
.TH "ExtendableMessageEvent.source" "JS" "December 10, 2023" "JavaScript" "JavaScript Reference Manual"
.SH NAME
ExtendableMessageEvent.source \- ExtendableMessageEvent: source property
.SH SYNOPSIS
The \f[B]\f[CB]source\f[B]\f[R] read\-only property of the
\f[CR]ExtendableMessageEvent\f[R] interface returns a reference to the
\f[CR]Client\f[R] object from which the message was sent.
.SH VALUE
A \f[CR]Client\f[R], \f[CR]ServiceWorker\f[R] or \f[CR]MessagePort\f[R]
object.
.SH EXAMPLES
When the following code is used inside a service worker to respond to a
push messages by sending the data received via
\f[CR]PushMessageData\f[R] to the main context via a channel message,
the event object of \f[CR]onmessage\f[R] will be a
\f[CR]ExtendableMessageEvent\f[R].
.IP
.EX
let port;

self.addEventListener(\[dq]push\[dq], (e) => {
  const obj = e.data.json();

  if (obj.action === \[dq]subscribe\[dq] || obj.action === \[dq]unsubscribe\[dq]) {
    port.postMessage(obj);
  } else if (obj.action === \[dq]init\[dq] || obj.action === \[dq]chatMsg\[dq]) {
    port.postMessage(obj);
  }
});

self.onmessage = (e) => {
  console.log(e.source);
  port = e.ports[0];
};
.EE
.SH SEE ALSO
.IP \[bu] 2
Using Service Workers
.IP \[bu] 2
\c
.UR
https://github.com/mdn/dom-examples/tree/main/service-worker/simple-service-worker
Service workers basic code example
.UE \c
.IP \[bu] 2
Channel Messaging

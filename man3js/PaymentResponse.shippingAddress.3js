.\" Automatically generated by Pandoc 3.4
.\"
.TH "PaymentResponse.shippingAddress" "JS" "September 12, 2024" "JavaScript" "JavaScript Reference Manual"
.SH NAME
PaymentResponse.shippingAddress \- PaymentResponse: shippingAddress
property
.SH SYNOPSIS
\f[B]Secure context:\f[R] This feature is available only in secure
contexts (HTTPS).
.PP
The \f[B]\f[CB]shippingAddress\f[B]\f[R] read\-only property of the
\f[CR]PaymentRequest\f[R] interface returns a \f[CR]PaymentAddress\f[R]
object containing the shipping address provided by the user.
.SH VALUE
A \f[CR]PaymentAddress\f[R] object providing details comprising the
shipping address provided by the user.
.SH EXAMPLES
Generally, the user agent will fill the \f[CR]shippingAddress\f[R]
property for you.
You can trigger this by setting \f[CR]options.requestShipping\f[R] to
\f[CR]true\f[R] when calling the \f[CR]PaymentRequest\f[R] constructor.
.PP
In the example below, the cost of shipping varies by geography.
When the \f[CR]shippingaddresschange\f[R] event is fired and caught,
\f[CR]updateDetails()\f[R] is called to update the details of the
\f[CR]PaymentRequest\f[R], using \f[CR]shippingAddress\f[R] to set the
correct shipping cost.
.IP
.EX
\f[I]// Initialization of PaymentRequest arguments are excerpted for brevity.\f[R]

\f[B]const\f[R] payment = \f[B]new\f[R] PaymentRequest(supportedInstruments, details, options);

request.addEventListener(\[dq]shippingaddresschange\[dq], (evt) \f[B]=>\f[R] {
  evt.updateWith(
    \f[B]new\f[R] Promise((resolve) \f[B]=>\f[R] {
      updateDetails(details, request.shippingAddress, resolve);
    }),
  );
});

payment
  .show()
  .then((paymentResponse) \f[B]=>\f[R] {
    \f[I]// Processing of paymentResponse excerpted for the same of brevity.\f[R]
  })
  .catch((err) \f[B]=>\f[R] {
    console.error(\[dq]Uh oh, something bad happened\[dq], err.message);
  });

\f[B]function\f[R] updateDetails(details, shippingAddress, resolve) {
  \f[B]if\f[R] (shippingAddress.country === \[dq]US\[dq]) {
    \f[B]const\f[R] shippingOption = {
      id: \[dq]\[dq],
      label: \[dq]\[dq],
      amount: { currency: \[dq]USD\[dq], value: \[dq]0.00\[dq] },
      selected: \f[B]true\f[R],
    };
    \f[B]if\f[R] (shippingAddress.region === \[dq]MO\[dq]) {
      shippingOption.id = \[dq]mo\[dq];
      shippingOption.label = \[dq]Free shipping in Missouri\[dq];
      details.total.amount.value = \[dq]55.00\[dq];
    } \f[B]else\f[R] {
      shippingOption.id = \[dq]us\[dq];
      shippingOption.label = \[dq]Standard shipping in US\[dq];
      shippingOption.amount.value = \[dq]5.00\[dq];
      details.total.amount.value = \[dq]60.00\[dq];
    }
    details.displayItems.splice(2, 1, shippingOption);
    details.shippingOptions = [shippingOption];
  } \f[B]else\f[R] {
    \f[B]delete\f[R] details.shippingOptions;
  }
  resolve(details);
}
.EE

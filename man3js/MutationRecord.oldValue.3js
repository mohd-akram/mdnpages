.\" Automatically generated by Pandoc 3.1.12.3
.\"
.TH "MutationRecord.oldValue" "JS" "January 16, 2024" "JavaScript" "JavaScript Reference Manual"
.SH NAME
MutationRecord.oldValue \- MutationRecord: oldValue property
.SH SYNOPSIS
The \f[CR]MutationRecord\f[R] read\-only property
\f[B]\f[CB]oldValue\f[B]\f[R] contains the character data or attribute
value of an observed node before it was changed.
.SH VALUE
A string representing the old value of an attribute which has been
changed, if:
.IP \[bu] 2
the \f[CR]attributeOldValue\f[R] parameter to
\f[CR]MutationObserver.observe()\f[R] is \f[CR]true\f[R]
.IP \[bu] 2
the \f[CR]attributes\f[R] parameter to
\f[CR]MutationObserver.observe()\f[R] is \f[CR]true\f[R] or omitted
.IP \[bu] 2
the mutation \f[CR]type\f[R] is \f[CR]attributes\f[R].
.PP
A string representing the old value of a \f[CR]CharacterData\f[R] node
that has been changed, if:
.IP \[bu] 2
the \f[CR]characterDataOldValue\f[R] parameter to
\f[CR]MutationObserver.observe()\f[R] is \f[CR]true\f[R]
.IP \[bu] 2
the \f[CR]characterData\f[R] parameter to
\f[CR]MutationObserver.observe()\f[R] is \f[CR]true\f[R] or omitted
.IP \[bu] 2
the mutation \f[CR]type\f[R] is \f[CR]characterData\f[R].
.PP
Otherwise this property is \f[CR]null\f[R].
.SH EXAMPLES
.SS Show old color value
In the following example, there is a button that changes the color of an
\f[CR]h1\f[R] to a random new color.
A \f[CR]MutationObserver\f[R] is used to observe the target node
(\f[CR]h1\f[R]) for changes to the attribute; when a change is detected,
the observer calls a function, \f[CR]logOldValue()\f[R].
.PP
The \f[CR]logOldValue()\f[R] function is passed the
\f[CR]mutationRecords\f[R] array, which contains the
\f[CR]MutationRecord\f[R] objects.
The \f[CR]oldValue\f[R] property of the \f[CR]MutationRecord\f[R] object
is then displayed, in the color of the old value.
.SS HTML
.IP
.EX
<\f[B]h1\f[R] id=\[dq]h1\[dq] style=\[dq]color: rgb(0 0 0);\[dq]>Hi, Mom!</\f[B]h1\f[R]>
<\f[B]button\f[R] id=\[dq]changeColorButton\[dq]>Change color</\f[B]button\f[R]>
<\f[B]p\f[R] id=\[dq]log\[dq]></\f[B]p\f[R]>
.EE
.SS JavaScript
.IP
.EX
\f[B]const\f[R] h1 = document.getElementById(\[dq]h1\[dq]);
\f[B]const\f[R] changeValueButton = document.getElementById(\[dq]changeColorButton\[dq]);
\f[B]const\f[R] log = document.getElementById(\[dq]log\[dq]);

changeColorButton.addEventListener(\[dq]click\[dq], () \f[B]=>\f[R] {
  \f[I]// Random 6 character hexadecimal number to use as the hex color value\f[R]
  \f[B]const\f[R] newColor = Math.floor(Math.random() * 16777215).toString(16);
  h1.style.color = \[ga]#${newColor}\[ga];
});

\f[B]function\f[R] logOldValue(mutationRecordArray) {
  \f[B]for\f[R] (\f[B]const\f[R] record \f[B]of\f[R] mutationRecordArray) {
    log.textContent = \[ga]Old value: ${record.oldValue}\[ga];
    log.style.cssText = record.oldValue;
  }
}

\f[B]const\f[R] observer = \f[B]new\f[R] MutationObserver(logOldValue);
observer.observe(h1, {
  attributes: \f[B]true\f[R],
  attributeOldValue: \f[B]true\f[R],
});
.EE
.SS Result

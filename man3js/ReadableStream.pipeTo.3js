.\" Automatically generated by Pandoc 3.7.0.1
.\"
.TH "READABLESTREAM.PIPETO" "3JS" "July 10, 2024" "JavaScript" "JavaScript Reference Manual"
.SH NAME
ReadableStream.pipeTo \- ReadableStream: pipeTo() method
.SH SYNOPSIS
\f[B]Note:\f[R] This feature is available in Web Workers.
.PP
The \f[B]\f[CB]pipeTo()\f[B]\f[R] method of the
\f[CR]ReadableStream\f[R] interface pipes the current
\f[CR]ReadableStream\f[R] to a given \f[CR]WritableStream\f[R] and
returns a \f[CR]Promise\f[R] that fulfills when the piping process
completes successfully, or rejects if any errors were encountered.
.PP
Piping a stream will generally lock it for the duration of the pipe,
preventing other readers from locking it.
.SH SYNTAX
.IP
.EX
pipeTo(destination)
pipeTo(destination, options)
.EE
.SS Parameters
.TP
\f[B]destination\f[R]
A \f[CR]WritableStream\f[R] that acts as the final destination for the
\f[CR]ReadableStream\f[R].
.TP
\f[B]options\f[R] \f[I](optional)\f[R]
The options that should be used when piping to the \f[CR]writable\f[R]
stream.
Available options are:
.RS
.TP
\f[B]preventClose\f[R]
If this is set to \f[CR]true\f[R], the source \f[CR]ReadableStream\f[R]
closing will no longer cause the destination \f[CR]WritableStream\f[R]
to be closed.
The method will return a fulfilled promise once this process completes,
unless an error is encountered while closing the destination in which
case it will be rejected with that error.
.TP
\f[B]preventAbort\f[R]
If this is set to \f[CR]true\f[R], errors in the source
\f[CR]ReadableStream\f[R] will no longer abort the destination
\f[CR]WritableStream\f[R].
The method will return a promise rejected with the source\(cqs error, or
with any error that occurs during aborting the destination.
.TP
\f[B]preventCancel\f[R]
If this is set to \f[CR]true\f[R], errors in the destination
\f[CR]WritableStream\f[R] will no longer cancel the source
\f[CR]ReadableStream\f[R].
In this case the method will return a promise rejected with the
source\(cqs error, or with any error that occurs during canceling the
source.
In addition, if the destination writable stream starts out closed or
closing, the source readable stream will no longer be canceled.
In this case the method will return a promise rejected with an error
indicating piping to a closed stream failed, or with any error that
occurs during canceling the source.
.TP
\f[B]signal\f[R]
If set to an \f[CR]AbortSignal\f[R] object, ongoing pipe operations can
then be aborted via the corresponding \f[CR]AbortController\f[R].
.RE
.SS Return value
A \f[CR]Promise\f[R] that resolves when the piping process has
completed.
.SS Exceptions
.TP
\f[B]TypeError\f[R]
The \f[CR]writableStream\f[R] and/or \f[CR]readableStream\f[R] objects
are not a writable stream/readable stream, or one or both of the streams
are locked.
.SH EXAMPLES
.IP
.EX
\f[I]// Fetch the original image\f[R]
fetch(\(dqpng\-logo.png\(dq)
  \f[I]// Retrieve its body as ReadableStream\f[R]
  .then((response) \f[B]=>\f[R] response.body)
  .then((body) \f[B]=>\f[R] body.pipeThrough(\f[B]new\f[R] PNGTransformStream()))
  .then((rs) \f[B]=>\f[R] rs.pipeTo(\f[B]new\f[R] FinalDestinationStream()));
.EE
.PP
The same example, but using \f[CR]await\f[R]:
.IP
.EX
(\f[B]async\f[R] () \f[B]=>\f[R] {
  \f[I]// Fetch the original image\f[R]
  \f[B]const\f[R] response = \f[B]await\f[R] fetch(\(dqpng\-logo.png\(dq);
  \f[I]// Retrieve its body as ReadableStream\f[R]
  \f[B]await\f[R] response.body
    .pipeThrough(\f[B]new\f[R] PNGTransformStream())
    .pipeTo(\f[B]new\f[R] FinalDestinationStream());
})();
.EE
.SH SEE ALSO
.IP \(bu 2
\f[CR]ReadableStream()\f[R] constructor
.IP \(bu 2
Pipe chains

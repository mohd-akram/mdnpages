.\" Automatically generated by Pandoc 3.7.0.1
.\"
.TH "DOCUMENT.VISIBILITYCHANGE_EVENT" "3JS" "May 23, 2025" "JavaScript" "JavaScript Reference Manual"
.SH NAME
Document.visibilitychange_event \- Document: visibilitychange event
.SH SYNOPSIS
The \f[CR]visibilitychange\f[R] event is fired at the document when the
contents of its tab have become visible or have been hidden.
.PP
The event is not cancelable.
.SH SYNTAX
Use the event name in methods like \f[CR]addEventListener()\f[R], or set
an event handler property.
.IP
.EX
addEventListener(\(dqvisibilitychange\(dq, (event) => { })

onvisibilitychange = (event) => { }
.EE
.SH EVENT TYPE
A generic \f[CR]Event\f[R].
.SH USAGE NOTES
The event doesn\(cqt include the document\(cqs updated visibility
status, but you can get that information from the document\(cqs
\f[CR]visibilityState\f[R] property.
.PP
This event fires with a \f[CR]visibilityState\f[R] of \f[CR]hidden\f[R]
when a user navigates to a new page, switches tabs, closes the tab,
minimizes or closes the browser, or, on mobile, switches from the
browser to a different app.
Transitioning to \f[CR]hidden\f[R] is the last event that\(cqs reliably
observable by the page, so developers should treat it as the likely end
of the user\(cqs session (for example, for sending analytics data).
.PP
The transition to \f[CR]hidden\f[R] is also a good point at which pages
can stop making UI updates and stop any tasks that the user doesn\(cqt
want to have running in the background.
.SH EXAMPLES
.SS Pausing music on transitioning to hidden
This example pauses playing audio when the page is hidden and resumes
playing when the page becomes visible again.
For a full example, see the Page Visibility API: Pausing audio on page
hide documentation.
.IP
.EX
document.addEventListener(\(dqvisibilitychange\(dq, () \f[B]=>\f[R] {
  \f[B]if\f[R] (document.hidden) {
    playingOnHide = !audio.paused;
    audio.pause();
  } \f[B]else\f[R] \f[B]if\f[R] (playingOnHide) {
    \f[I]// Resume playing if audio was \(dqplaying on hide\(dq\f[R]
    audio.play();
  }
});
.EE
.SS Sending end\-of\-session analytics on transitioning to hidden
This example treats the transition to \f[CR]hidden\f[R] as the end of
the user\(cqs session, and sends the appropriate analytics using the
\f[CR]Navigator.sendBeacon()\f[R] API:
.IP
.EX
document.onvisibilitychange = () \f[B]=>\f[R] {
  \f[B]if\f[R] (document.visibilityState === \(dqhidden\(dq) {
    navigator.sendBeacon(\(dq/log\(dq, analyticsData);
  }
};
.EE
.SH SEE ALSO
.IP \(bu 2
Page Visibility API
.IP \(bu 2
\f[CR]Document.visibilityState\f[R]
.IP \(bu 2
\f[CR]Document.hidden\f[R]
.IP \(bu 2
\c
.UR https://www.igvita.com/2015/11/20/dont-lose-user-and-app-state-use-page-visibility/
Don\(cqt lose user and app state, use Page Visibility
.UE \c
\ explains in detail why you should use \f[CR]visibilitychange\f[R], not
\f[CR]beforeunload\f[R]/\f[CR]unload\f[R].
.IP \(bu 2
\c
.UR https://developer.chrome.com/docs/web-platform/page-lifecycle-api
Page Lifecycle API
.UE \c
\ gives best\-practices guidance on handling page lifecycle behavior in
your web applications.

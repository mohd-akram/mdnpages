.\" Automatically generated by Pandoc 3.1.12.3
.\"
.TH "Document.visibilitychange_event" "JS" "April 7, 2023" "JavaScript" "JavaScript Reference Manual"
.SH NAME
Document.visibilitychange_event \- Document: visibilitychange event
.SH SYNOPSIS
The \f[CR]visibilitychange\f[R] event is fired at the document when the
contents of its tab have become visible or have been hidden.
.PP
The event is not cancelable.
.SH SYNTAX
Use the event name in methods like \f[CR]addEventListener()\f[R], or set
an event handler property.
.IP
.EX
addEventListener(\[dq]visibilitychange\[dq], (event) \f[B]=>\f[R] {});

onvisibilitychange = (event) \f[B]=>\f[R] {};
.EE
.SH EVENT TYPE
A generic \f[CR]Event\f[R].
.SH USAGE NOTES
The event doesn\[cq]t include the document\[cq]s updated visibility
status, but you can get that information from the document\[cq]s
\f[CR]visibilityState\f[R] property.
.PP
This event fires with a \f[CR]visibilityState\f[R] of \f[CR]hidden\f[R]
when a user navigates to a new page, switches tabs, closes the tab,
minimizes or closes the browser, or, on mobile, switches from the
browser to a different app.
Transitioning to \f[CR]hidden\f[R] is the last event that\[cq]s reliably
observable by the page, so developers should treat it as the likely end
of the user\[cq]s session (for example, for sending analytics data).
.PP
The transition to \f[CR]hidden\f[R] is also a good point at which pages
can stop making UI updates and stop any tasks that the user doesn\[cq]t
want to have running in the background.
.SH EXAMPLES
.SS Pausing music on transitioning to hidden
This example begins playing a music track when the document becomes
visible, and pauses the music when the document is no longer visible.
.IP
.EX
document.addEventListener(\[dq]visibilitychange\[dq], () \f[B]=>\f[R] {
  \f[B]if\f[R] (document.visibilityState === \[dq]visible\[dq]) {
    backgroundMusic.play();
  } \f[B]else\f[R] {
    backgroundMusic.pause();
  }
});
.EE
.SS Sending end\-of\-session analytics on transitioning to hidden
This example treats the transition to \f[CR]hidden\f[R] as the end of
the user\[cq]s session, and sends the appropriate analytics using the
\f[CR]Navigator.sendBeacon()\f[R] API:
.IP
.EX
document.onvisibilitychange = () \f[B]=>\f[R] {
  \f[B]if\f[R] (document.visibilityState === \[dq]hidden\[dq]) {
    navigator.sendBeacon(\[dq]/log\[dq], analyticsData);
  }
};
.EE
.SH SEE ALSO
.IP \[bu] 2
Page Visibility API
.IP \[bu] 2
\f[CR]Document.visibilityState\f[R]
.IP \[bu] 2
\c
.UR https://www.igvita.com/2015/11/20/dont-lose-user-and-app-state-use-page-visibility/
Don\[cq]t lose user and app state, use Page Visibility
.UE \c
\ explains in detail why you should use \f[CR]visibilitychange\f[R], not
\f[CR]beforeunload\f[R]/\f[CR]unload\f[R].
.IP \[bu] 2
\c
.UR https://developer.chrome.com/blog/page-lifecycle-api/
Page Lifecycle API
.UE \c
\ gives best\-practices guidance on handling page lifecycle behavior in
your web applications.

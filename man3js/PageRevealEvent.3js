.\" Automatically generated by Pandoc 3.6.2
.\"
.TH "PageRevealEvent" "JS" "December 20, 2024" "JavaScript" "JavaScript Reference Manual"
.SH NAME
PageRevealEvent \- PageRevealEvent
.SH SYNOPSIS
The \f[B]\f[CB]PageRevealEvent\f[B]\f[R] event object is made available
inside handler functions for the \f[CR]pagereveal\f[R] event.
.PP
During a cross\-document navigation, it allows you to manipulate a
related view transition (providing access to the relevant
\f[CR]ViewTransition\f[R] object) from the document being navigated
\f[I]to\f[R], if a view transition was triggered by the navigation.
.PP
Outside view transitions, this event is also useful for cases such as
triggering a startup animation, or reporting a page view.
It\[cq]s equivalent to the first
\f[CR]Window.requestAnimationFrame()\f[R] run after a cross\-document
navigation, if you were to trigger \f[CR]requestAnimationFrame()\f[R] in
the \f[CR]<head>\f[R] of the document.
For example, if you ran the following \f[CR]reveal()\f[R] function in
the \f[CR]<head>\f[R]:
.IP
.EX
\f[B]function\f[R] reveal() {
  \f[I]// Include startup animation here\f[R]
}
\f[I]/* This will fire in the first rendered frame after loading */\f[R]
requestAnimationFrame(() \f[B]=>\f[R] reveal());

\f[I]/* This will fire if the page is restored from BFCache */\f[R]
window.onpagehide = () \f[B]=>\f[R] requestAnimationFrame(() \f[B]=>\f[R] reveal());
.EE
.SH CONSTRUCTOR
.TP
\f[B]PageRevealEvent()\f[R]
Creates a new \f[CR]PageRevealEvent\f[R] object instance.
.SH INSTANCE PROPERTIES
.TP
\f[B]viewTransition\f[R] \f[I](read\-only)\f[R]
Contains a \f[CR]ViewTransition\f[R] object representing the active view
transition for the cross\-document navigation.
.SH EXAMPLES
.IP
.EX
window.addEventListener(\[dq]pagereveal\[dq], \f[B]async\f[R] (e) \f[B]=>\f[R] {
  \f[I]// If the \[dq]from\[dq] history entry does not exist, return\f[R]
  \f[B]if\f[R] (!navigation.activation.from) \f[B]return\f[R];

  \f[I]// Only run this if an active view transition exists\f[R]
  \f[B]if\f[R] (e.viewTransition) {
    \f[B]const\f[R] fromUrl = \f[B]new\f[R] URL(navigation.activation.from.url);
    \f[B]const\f[R] currentUrl = \f[B]new\f[R] URL(navigation.activation.entry.url);

    \f[I]// Went from profile page to homepage\f[R]
    \f[I]// \[ti]> Set VT names on the relevant list item\f[R]
    \f[B]if\f[R] (isProfilePage(fromUrl) && isHomePage(currentUrl)) {
      \f[B]const\f[R] profile = extractProfileNameFromUrl(fromUrl);

      \f[I]// Set view\-transition\-name values on the elements to animate\f[R]
      document.querySelector(\[ga]#${profile} span\[ga]).style.viewTransitionName =
        \[dq]name\[dq];
      document.querySelector(\[ga]#${profile} img\[ga]).style.viewTransitionName =
        \[dq]avatar\[dq];

      \f[I]// Remove names after snapshots have been taken\f[R]
      \f[I]// so that we\[aq]re ready for the next navigation\f[R]
      \f[B]await\f[R] e.viewTransition.ready;
      document.querySelector(\[ga]#${profile} span\[ga]).style.viewTransitionName =
        \[dq]none\[dq];
      document.querySelector(\[ga]#${profile} img\[ga]).style.viewTransitionName =
        \[dq]none\[dq];
    }

    \f[I]// Went to profile page\f[R]
    \f[I]// \[ti]> Set VT names on the main title and image\f[R]
    \f[B]if\f[R] (isProfilePage(currentUrl)) {
      \f[I]// Set view\-transition\-name values on the elements to animate\f[R]
      document.querySelector(\[ga]#detail main h1\[ga]).style.viewTransitionName =
        \[dq]name\[dq];
      document.querySelector(\[ga]#detail main img\[ga]).style.viewTransitionName =
        \[dq]avatar\[dq];

      \f[I]// Remove names after snapshots have been taken\f[R]
      \f[I]// so that we\[aq]re ready for the next navigation\f[R]
      \f[B]await\f[R] e.viewTransition.ready;
      document.querySelector(\[ga]#detail main h1\[ga]).style.viewTransitionName =
        \[dq]none\[dq];
      document.querySelector(\[ga]#detail main img\[ga]).style.viewTransitionName =
        \[dq]none\[dq];
    }
  }
});
.EE
.RS
.PP
\f[B]Note:\f[R] See \c
.UR https://view-transitions.chrome.dev/profiles/mpa/
List of Chrome DevRel team members
.UE \c
\ for the live demo this code is taken from.
.RE
.SH SEE ALSO
.IP \[bu] 2
View Transition API

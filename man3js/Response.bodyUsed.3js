.\" Automatically generated by Pandoc 3.7.0.1
.\"
.TH "RESPONSE.BODYUSED" "3JS" "March 13, 2025" "JavaScript" "JavaScript Reference Manual"
.SH NAME
Response.bodyUsed \- Response: bodyUsed property
.SH SYNOPSIS
\f[B]Note:\f[R] This feature is available in Web Workers.
.PP
The \f[B]\f[CB]bodyUsed\f[B]\f[R] read\-only property of the
\f[CR]Response\f[R] interface is a boolean value that indicates whether
the body has been read yet.
.SH VALUE
A boolean value.
.SH EXAMPLES
.SS Checking \f[CR]bodyUsed\f[R]
This example illustrates that reading the body of a response changes the
value of \f[CR]bodyUsed\f[R] from \f[CR]false\f[R] to \f[CR]true\f[R].
.PP
The example contains an empty image.
.PP
When the example\(cqs JavaScript runs, we fetch an image and assigns the
returned promise to a variable \f[CR]responsePromise\f[R].
.PP
When the user clicks \(lqUse response\(rq, we check whether the response
has been used already.
If it has, we print a message.
If it has not, we read the response body and used it to provide a value
for the image\(cqs \f[CR]src\f[R] attribute.
.SS HTML
.IP
.EX
<\f[B]button\f[R] id=\(dquse\(dq>Use response</\f[B]button\f[R]>
<\f[B]button\f[R] id=\(dqreset\(dq>Reset</\f[B]button\f[R]>
<\f[B]br\f[R] />
<\f[B]img\f[R] id=\(dqmy\-image\(dq src=\(dq\(dq />
<\f[B]pre\f[R] id=\(dqlog\(dq></\f[B]pre\f[R]>
.EE
.SS JavaScript
.IP
.EX
\f[B]const\f[R] useResponse = document.querySelector(\(dq#use\(dq);
\f[B]const\f[R] reset = document.querySelector(\(dq#reset\(dq);
\f[B]const\f[R] myImage = document.querySelector(\(dq#my\-image\(dq);
\f[B]const\f[R] log = document.querySelector(\(dq#log\(dq);

\f[B]const\f[R] responsePromise = fetch(
  \(dqhttps://upload.wikimedia.org/wikipedia/commons/7/77/Delete_key1.jpg\(dq,
);

useResponse.addEventListener(\(dqclick\(dq, \f[B]async\f[R] () \f[B]=>\f[R] {
  \f[B]const\f[R] response = \f[B]await\f[R] responsePromise;
  \f[B]if\f[R] (response.bodyUsed) {
    log.textContent = \(dqBody has already been used!\(dq;
  } \f[B]else\f[R] {
    \f[B]const\f[R] result = \f[B]await\f[R] response.blob();
    \f[B]const\f[R] objectURL = URL.createObjectURL(result);
    myImage.src = objectURL;
  }
});

reset.addEventListener(\(dqclick\(dq, () \f[B]=>\f[R] {
  document.location.reload();
});
.EE
.SS Result
Initially there is no value for the image.
If you click \(lqUse response\(rq once, then \f[CR]bodyUsed\f[R] is
\f[CR]false\f[R], so we read the response and set the image.
If you then click \(lqUse response\(rq again, then \f[CR]bodyUsed\f[R]
is \f[CR]true\f[R], and we print the message.
.PP
Click \(lqReset\(rq to reload the example, so you can try again.
.SH SEE ALSO
.IP \(bu 2
ServiceWorker API
.IP \(bu 2
HTTP access control (CORS)
.IP \(bu 2
HTTP

.\" Automatically generated by Pandoc 3.6.2
.\"
.TH "FileSystemWritableFileStream.write" "JS" "April 5, 2024" "JavaScript" "JavaScript Reference Manual"
.SH NAME
FileSystemWritableFileStream.write \- FileSystemWritableFileStream:
write() method
.SH SYNOPSIS
\f[B]Secure context:\f[R] This feature is available only in secure
contexts (HTTPS).
.PP
\f[B]Note:\f[R] This feature is available in Web Workers.
.PP
The \f[B]\f[CB]write()\f[B]\f[R] method of the
\f[CR]FileSystemWritableFileStream\f[R] interface writes content into
the file the method is called on, at the current file cursor offset.
.PP
No changes are written to the actual file on disk until the stream has
been closed.
Changes are typically written to a temporary file instead.
This method can also be used to seek to a byte point within the stream
and truncate to modify the total bytes the file contains.
.SH SYNTAX
.IP
.EX
write(data)
.EE
.SS Parameters
.TP
\f[B]data\f[R]
Can be one of the following:
.RS
.IP \[bu] 2
The file data to write, in the form of an \f[CR]ArrayBuffer\f[R],
\f[CR]TypedArray\f[R], \f[CR]DataView\f[R], \f[CR]Blob\f[R], or string.
.IP \[bu] 2
An object containing the following properties:
.RS 2
.TP
\f[B]type\f[R]
A string that is one of \f[CR]\[dq]write\[dq]\f[R],
\f[CR]\[dq]seek\[dq]\f[R], or \f[CR]\[dq]truncate\[dq]\f[R].
.TP
\f[B]data\f[R]
The file data to write.
Can be an \f[CR]ArrayBuffer\f[R], \f[CR]TypedArray\f[R],
\f[CR]DataView\f[R], \f[CR]Blob\f[R], or string.
This property is required if \f[CR]type\f[R] is set to
\f[CR]\[dq]write\[dq]\f[R].
.TP
\f[B]position\f[R]
The byte position the current file cursor should move to if type
\f[CR]\[dq]seek\[dq]\f[R] is used.
Can also be set if \f[CR]type\f[R] is \f[CR]\[dq]write\[dq]\f[R], in
which case the write will start at the specified position.
.TP
\f[B]size\f[R]
A number representing the number of bytes the stream should contain.
This property is required if \f[CR]type\f[R] is set to
\f[CR]\[dq]truncate\[dq]\f[R].
.RE
.RE
.SS Return value
A \f[CR]Promise\f[R] that returns \f[CR]undefined\f[R].
.SS Exceptions
.TP
\f[B]NotAllowedError\f[R] \f[B]DOMException\f[R]
Thrown if \f[CR]PermissionStatus.state\f[R] is not \f[CR]granted\f[R].
.TP
\f[B]QuotaExceededError\f[R] \f[B]DOMException\f[R]
Thrown if the new size of the file is larger than the original size of
the file, and exceeds the browser\[cq]s storage quota.
.TP
\f[B]TypeError\f[R]
Thrown if \f[CR]data\f[R] is undefined, or if \f[CR]position\f[R] or
\f[CR]size\f[R] aren\[cq]t valid.
.SH EXAMPLES
The following asynchronous function opens the `Save File' picker, which
returns a \f[CR]FileSystemFileHandle\f[R] once a file is selected.
From this, a writable stream is created using the
\f[CR]FileSystemFileHandle.createWritable()\f[R] method.
.PP
A text string is then written to the stream, which is subsequently
closed.
.IP
.EX
\f[B]async\f[R] \f[B]function\f[R] saveFile() {
  \f[B]try\f[R] {
    \f[I]// create a new handle\f[R]
    \f[B]const\f[R] newHandle = \f[B]await\f[R] window.showSaveFilePicker();

    \f[I]// create a FileSystemWritableFileStream to write to\f[R]
    \f[B]const\f[R] writableStream = \f[B]await\f[R] newHandle.createWritable();

    \f[I]// write our file\f[R]
    \f[B]await\f[R] writableStream.write(\[dq]This is my file content\[dq]);

    \f[I]// close the file and write the contents to disk.\f[R]
    \f[B]await\f[R] writableStream.close();
  } \f[B]catch\f[R] (err) {
    console.error(err.name, err.message);
  }
}
.EE
.PP
The following examples show different options that can be passed into
the \f[CR]write()\f[R] method.
.IP
.EX
\f[I]// just pass in the data (no options)\f[R]
writableStream.write(data);

\f[I]// writes the data to the stream from the determined position\f[R]
writableStream.write({ type: \[dq]write\[dq], position, data });

\f[I]// updates the current file cursor offset to the position specified\f[R]
writableStream.write({ type: \[dq]seek\[dq], position });

\f[I]// resizes the file to be size bytes long\f[R]
writableStream.write({ type: \[dq]truncate\[dq], size });
.EE
.SH SEE ALSO
.IP \[bu] 2
File System API
.IP \[bu] 2
\c
.UR https://developer.chrome.com/docs/capabilities/web-apis/file-system-access
The File System Access API: simplifying access to local files
.UE \c
